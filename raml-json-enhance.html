<!--
@license
Copyright 2016 The Advanced REST client authors <arc@mulesoft.com>
Licensed under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at
http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
-->
<link rel="import" href="../polymer/polymer.html">
<!--
The `<raml-json-enhance>` enhaces the JSON output from the RAML parser so it can
be used in the ARC elements (which expects enhanced data structure).

The work is asynchronous. After the `json` property is set/changed it will call the
worker automatically and report the result via the `raml-json-enhance-ready` event.

Polymer application can bind to the `result` property which will notify the change.

### Example
```
<raml-json-enhance json="{...}"></raml-json-enhance>
window.addEventListener('raml-json-enhance-ready', function(e) {
  console.log(e.detail.json);
  // equals to
  console.log(e.target.result);
});
```

**Note** This element MUST be used to enhance parser JSON output in order to use
any RAML related ARC element. Enhancer creates common data structure and
expands RAML types. Element expects the JSON object to contain complete data
about method / endpoint / type / security scheme and so on. It will not look for
the data in the root of raml definition. Thanks to this, you can push just a part
of the JSON object to a specific element to make it work.

For example, the `<raml-docs-method-viewer>` viewer expects the `raml` propety to
be a method definition only (without of the rest of the RAML structure). If
enhanced with the library, the JSON object describing the method will contain
all required information to render the view.

The element contains a set of Polyfills so it will work in IE11+ browsers.

### Biuld process
This element uses web workers to expand JSON result (normalize it).
The element will attempty to load following scitps from the same location where
this script resides:
- polyfills.js
- browser/index.js
- raml2object.js
Build scripts should ensure that this resources are included in the final build.

## Affected properties
- `types`, `traits`, `resourceTypes`, `annotationTypes`, `securitySchemes` - Becomes an object instead of array, keys are object name (with library variable name if applicable)
- `responses`, `body`, `queryParameters`, `headers`, `properties`, `baseUriParameters`, `annotations`, `uriParameters` are recusively transformed into the arrays
- types/{object} - Expanded form for a RAML type and a canonical form with computed inheritance and pushed unions to the top level of the type structure. See documantaion for the [expansion library](https://github.com/raml-org/raml-parser-toolbelt/tree/master/tools/datatype-expansion).
- resource/parentUrl - a full URL of the parent resource
- resource/allUriParameters - list of all URI parameters that apply to this resource (computed from the root down to current resource)
- resource/securedBy - Replaces security schema name with schema's definition.
- method/allUriParameters - The same as for a resource but applied to a method that is direct child of the resource.
- method/absoluteUri - Full, absolute URL to the method containg URI parametes in their RAML's form, eg `/{fileId}`
- method/securedBy - The same as for the resource
- method/*/headers - Full list of all possible headers compured from traits, security schemes etc
- method/*/queryParameters - Full list of all possible queryParameters compured from traits, security schemes etc
- method/responses - Full list of all possible response compured from traits, security schemes etc
- type/properties/items - replaces type name with type definition
- */example(s) - always produces `examples` as an array of example contents
- */structuredExample - content is moved to the *.example array

## Developing this element

Unlike other web components this component has to be build. Make any
changes to the `raml-json-enhance-template.html`. After making a change call
`npm run build`. It will concatenate all required files
and insert generated web worker contentnt into the element's body.

The `raml-json-enhance.html` will be regenerated each time you call build
script.

@group RAML Elements
@element raml-json-enhance
@demo demo/index.html
-->
<dom-module id="raml-json-enhance">
  <template>
    <style>
     :host {
      display: none;
    }
    </style>
    <script id="normalizer" type="javascript/worker">
"function"!=typeof Object.assign&&(Object.assign=function(target){"use strict";if(null===target)throw new TypeError("Cannot convert undefined or null to object");for(var to=Object(target),index=1;index<arguments.length;index++){var nextSource=arguments[index];if(null!==nextSource)for(var nextKey in nextSource)Object.prototype.hasOwnProperty.call(nextSource,nextKey)&&(to[nextKey]=nextSource[nextKey])}return to}),Object.keys||(Object.keys=function(){"use strict";var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;return function(obj){if("function"!=typeof obj&&("object"!=typeof obj||null===obj))throw new TypeError("Object.keys called on non-object");var prop,i,result=[];for(prop in obj)hasOwnProperty.call(obj,prop)&&result.push(prop);if(hasDontEnumBug)for(i=0;i<dontEnumsLength;i++)hasOwnProperty.call(obj,dontEnums[i])&&result.push(dontEnums[i]);return result}}()),Array.isArray||(Array.isArray=function(arg){return"[object Array]"===Object.prototype.toString.call(arg)}),String.prototype.endsWith||(String.prototype.endsWith=function(searchStr,Position){return Position<this.length?Position|=0:Position=this.length,this.substr(Position-searchStr.length,searchStr.length)===searchStr});
function MakePromise(asap){function Promise(fn){if("object"!=typeof this||"function"!=typeof fn)throw new TypeError;this._state=null,this._value=null,this._deferreds=[],doResolve(fn,resolve.bind(this),reject.bind(this))}function handle(deferred){var me=this;if(null===this._state)return void this._deferreds.push(deferred);asap(function(){var cb=me._state?deferred.onFulfilled:deferred.onRejected;if("function"!=typeof cb)return void(me._state?deferred.resolve:deferred.reject)(me._value);var ret;try{ret=cb(me._value)}catch(e){return void deferred.reject(e)}deferred.resolve(ret)})}function resolve(newValue){try{if(newValue===this)throw new TypeError;if(newValue&&("object"==typeof newValue||"function"==typeof newValue)){var then=newValue.then;if("function"==typeof then)return void doResolve(then.bind(newValue),resolve.bind(this),reject.bind(this))}this._state=!0,this._value=newValue,finale.call(this)}catch(e){reject.call(this,e)}}function reject(newValue){this._state=!1,this._value=newValue,finale.call(this)}function finale(){for(var i=0,len=this._deferreds.length;i<len;i++)handle.call(this,this._deferreds[i]);this._deferreds=null}function doResolve(fn,onFulfilled,onRejected){var done=!1;try{fn(function(value){done||(done=!0,onFulfilled(value))},function(reason){done||(done=!0,onRejected(reason))})}catch(ex){if(done)return;done=!0,onRejected(ex)}}return Promise.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise.prototype.then=function(onFulfilled,onRejected){var me=this;return new Promise(function(resolve,reject){handle.call(me,{onFulfilled:onFulfilled,onRejected:onRejected,resolve:resolve,reject:reject})})},Promise.resolve=function(value){return value&&"object"==typeof value&&value.constructor===Promise?value:new Promise(function(resolve){resolve(value)})},Promise.reject=function(value){return new Promise(function(resolve,reject){reject(value)})},Promise}"undefined"!=typeof module&&(module.exports=MakePromise);
"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function d(p,e,t){function r(i,o){if(!e[i]){if(!p[i]){var s="function"==typeof require&&require;if(!o&&s)return s(i,!0);if(n)return n(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var u=e[i]={exports:{}};p[i][0].call(u.exports,function(t){var e=p[i][1][t];return r(e||t)},u,u.exports,d,p,e,t)}return e[i].exports}for(var n="function"==typeof require&&require,i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,t,n){var i=e("../node_modules/datatype-expansion/src/index.js");"undefined"==typeof window?self.expansion=i:window.expansion=i},{"../node_modules/datatype-expansion/src/index.js":4}],2:[function(e,t,n){function i(e,n){e=a.cloneDeep(e);var t=e.type;if(l(t))return d(e);if("array"===t)return e.items=i(e.items||{type:"any"},n),d(e);if("object"===t){var s=e.properties,u=[a.cloneDeep(e)];if(u[0].properties={},a.each(s,function(t,r){var o=i(t,n);if("union"===o.type&&!1!==n.hoistUnions){var d=[];o.anyOf.forEach(function(t){"boolean"==typeof e.required&&(t.required=o.required);var n=!0,i=!1,l=void 0;try{for(var p,s=u[Symbol.iterator]();!(n=(p=s.next()).done);n=!0){var c=p.value;c=a.cloneDeep(c);var f=Object.assign({},o,t);delete f.anyOf,c.properties[r]=f,d.push(c)}}catch(e){i=!0,l=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw l}}}),u=d}else u=u.map(function(e){return e.properties[r]=o,e})}),1===u.length)return d(u[0]);if(u.length>1)return e.type="union",delete e.properties,delete e.additionalProperties,e.anyOf=u,d(e)}else{if("union"===t)return e.anyOf=e.anyOf.map(function(e){return i("type"in e?e:{type:e},n)}),d(e);if("object"===(void 0===t?"undefined":_typeof(t))){var p=r(e),c=a.cloneDeep(e);switch(c.type=p,p){case"object":c.properties=c.properties||{};break;case"array":c.items=c.items||{type:"any"};break;case"union":c.anyOf=c.anyOf||[]}if(Array.isArray(t)){return c=a.cloneDeep(t).map(function(e){return i(e,n)}).reduce(function(e,t){return o(t,e)},i(c,n))}var _=i(t,n);return o(_,i(c,n))}}return e}function r(e){if(void 0!==e.properties)return"object";if(void 0!==e.items)return"array";if("string"==typeof e.type)return e.type;if("object"===_typeof(e.type)){if(!Array.isArray(e.type))return r(e.type);var t=e.type.map(function(e){try{return r(e)}catch(t){return null}}).filter(function(e){return null!==e})[0];if(void 0!==t)return t}throw new Error("Cannot find top level class for node, not in expanded form")}var a=e("lodash"),o=e("./minType"),d=e("./util").consistencyCheck,l=e("./util").isOpaqueType;t.exports.canonicalForm=function(t,n){var r={};if("object"===(void 0===n?"undefined":_typeof(n))&&(r=n,n=r.callback),null==n)return i(t,r);setTimeout(function(){var e=void 0;try{e=i(t,r)}catch(t){return void n(t,null)}n(null,e)},0)}},{"./minType":5,"./util":6,lodash:7}],3:[function(e,t,n){function i(e,n,u,p){if("string"==typeof e)try{JSON.parse(e),e={type:"json",content:e}}catch(t){}if("string"==typeof e){if(/^\(.+\)$/.test(e)&&(e=e.match(/^\((.+)\)$/)[1]),s(e)||"object"===e||"array"===e)return{type:e};if(e.endsWith("?")&&s(e.replace("?","")))return d({type:"union",anyOf:[{type:e.replace("?","")},{type:"nil"}]},n,u,p);if(e.endsWith("[]")){return{type:"array",items:i(e.match(/^(.+)\[]$/)[1],n,u,p)}}if(/^[^|\s]+(?:\|[^|\s]+)+$/.test(e.replace(/\s+/g,""))){return d({anyOf:e.split("|").map(function(e){return e.trim()}),type:"union"},n,u,p)}if(e in n){if(e in u)return{type:"$recur"};u=Object.assign(_defineProperty({},e,!0),u);var f=n[e];return p.trackOriginalType&&"object"!==(void 0===f?"undefined":_typeof(f))&&(f={type:f}),f=i(f,n,u,p),p.trackOriginalType&&(f.originalType=e),f}throw new Error("could not resolve: "+e)}if("object"===(void 0===e?"undefined":_typeof(e))){if(e=l.cloneDeep(e),Array.isArray(e)&&(e={type:e}),e.type=e.type||e.properties&&"object"||e.items&&"array"||p.topLevel||"any","string"==typeof e.type){if("array"===e.type)return a(e,n,u,p);if("object"===e.type)return o(e,n,u,p);if("union"===e.type)return d(e,n,u,p);e.type in n?(e=r(e,n,u,p),e.type=i(e.type,n,u,p)):e=Object.assign(e,i(e.type,n,u,p))}else Array.isArray(e.type)?(e=r(e,n,u,p),e.type=e.type.map(function(e){return i(e,n,u,p)})):"object"===_typeof(e.type)?(e=r(e,n,u,p),e.type=i(e.type,n,u,p)):e=Object.assign(e,i(e.type,n,u,p));return null!=e.facets&&l.each(e.facets,function(t,r){e.facets[r]=i(t,n,u,p)}),e}throw new Error("form can only be a string or an object")}function r(e,t,n,i){return void 0!==e.properties&&(e=o(e,t,n,i)),void 0!==e.anyOf&&(e=d(e,t,n,i)),void 0!==e.items&&(e=a(e,t,n,i)),e}function a(e,t,n,r){return e.items=i(e.items||"any",t,n,r),e}function o(e,t,n,r){var a=e.properties;for(var o in a)if(a.hasOwnProperty(o)){var d=i(a[o]||"any",t,n,r);o.endsWith("?")&&(delete a[o],o=o.slice(0,-1),d.required=!1),void 0===d.required&&(d.required=!0),a[o]=d}return void 0===e.additionalProperties&&(e.additionalProperties=!0),e}function d(e,t,n,r){return e.anyOf=e.anyOf.map(function(e){return i(e,t,n,r)}),e}var l=e("lodash"),s=e("./util").isOpaqueType;t.exports.expandedForm=function(t,n,r){var a={};"object"===(void 0===r?"undefined":_typeof(r))&&(a=r,r=a.callback);var o={};for(var d in n)if(n[d]===t){o[d]=!0;break}if(null==r)return i(t,n,o,a);setTimeout(function(){var e=void 0;try{e=i(t,n,o,a)}catch(t){return void r(t,null)}r(null,e)},0)}},{"./util":6,lodash:7}],4:[function(e,t,n){var i=e("./expanded"),r=e("./canonical");t.exports={expandedForm:i.expandedForm,canonicalForm:r.canonicalForm}},{"./canonical":2,"./expanded":3}],5:[function(e,t,n){function i(e,t){var n=e.type,l=t.type;if(n===l&&a(n)){var x=Object.assign({},e,t);for(var b in d)void 0!==e[b]&&void 0!==t[b]?x[b]=d[b](e[b],t[b]):void 0===e[b]&&void 0===t[b]||(x[b]=e[b]||t[b]);return o(x)}if("any"===n?"any"!==l:"any"===l){var k="any"===n?e:t,j="any"===n?t:e,T=Object.assign({},e,t);T.type=j.type;for(var v in d)void 0!==k[v]&&void 0!==j[v]?T[v]=d[v](k[v],j[v]):void 0!==k[v]&&(T[v]=k[v]);return o(T)}if("number"===n&&"integer"===l){var I=Object.assign({},e,t);for(var O in d)void 0!==e[O]&&void 0!==t[O]?I[O]=d[O](e[O],t[O]):void 0!==e[O]&&(I[O]=e[O]);return o(I)}if("array"===n&&"array"===l){var w=Object.assign({},e,t);w.items=i(e.items,t.items);for(var A in d)void 0!==e[A]&&void 0!==t[A]?w[A]=d[A](e[A],t[A]):void 0!==e[A]&&(w[A]=e[A]);return o(w)}if("object"===n&&"object"===l){var S=Object.assign({},e,t),E={},L=e.properties||{},z=t.properties||{},N=Object.keys(L),R=Object.keys(z);N.filter(function(e){return e in z}).forEach(function(n){E[n]=i(e.properties[n],t.properties[n])}),N.filter(function(e){return!(e in z)}).forEach(function(t){E[t]=e.properties[t]}),R.filter(function(e){return!(e in L)}).forEach(function(e){E[e]=t.properties[e]});for(var C in d)void 0!==e[C]&&void 0!==t[C]?S[C]=d[C](e[C],t[C]):void 0!==e[C]&&(S[C]=e[C]);return S.properties=E,o(S)}if("union"===n||"union"===l){var W={},D=void 0,U=void 0;if("union"===n?(Object.assign(W,e),D=e.anyOf):(e=r(W,e),D=[e]),"union"===l?(Object.assign(W,t),U=t.anyOf):(t=r(W,t),U=[t]),W.anyOf=[],D.length>0)if(U.length>0){var s=!0,u=!1,p=void 0;try{for(var f,c=D[Symbol.iterator]();!(s=(f=c.next()).done);s=!0){var B=f.value,_=!0,h=!1,g=void 0;try{for(var m,y=U[Symbol.iterator]();!(_=(m=y.next()).done);_=!0){var P=m.value,q=i(B,P);"union"===q.type?W.anyOf.concat(q.anyOf):W.anyOf.push(q)}}catch(e){h=!0,g=e}finally{try{!_&&y.return&&y.return()}finally{if(h)throw g}}}}catch(e){u=!0,p=e}finally{try{!s&&c.return&&c.return()}finally{if(u)throw p}}}else W.anyOf=D;else W.anyOf=U;for(var F in d)void 0!==e[F]&&"union"===n?void 0!==t[F]&&"union"===l?W[F]=d[F](e[F],t[F]):W[F]=e[F]:void 0!==t[F]&&"union"===l&&(W[F]=t[F]);return o(W)}throw new Error("incompatible types: ["+l+", "+n+"]")}function r(e,t){var n={},i=!0,r=!1,a=void 0;try{for(var s,o=Object.keys(t)[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var u=s.value;u in l||u in d?n[u]=t[u]:e[u]=t[u]}}catch(e){r=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw a}}return n}var a=e("./util").isOpaqueType,o=e("./util").consistencyCheck,d={minProperties:function(e,t){if(e<=t)return Math.max(e,t);throw new Error("sub type has a weaker constraint for min-properties than base type")},maxProperties:function(e,t){if(e>=t)return Math.min(e,t);throw new Error("sub type has a weaker constraint for max-properties than base type")},minLength:function(e,t){if(e<=t)return Math.max(e,t);throw new Error("sub type has a weaker constraint for min-length than base type")},maxLength:function(e,t){if(e>=t)return Math.min(e,t);throw new Error("sub type has a weaker constraint for max-length than base type")},minimum:function(e,t){if(e<=t)return Math.max(e,t);throw new Error("sub type has a weaker constraint for minimum than base type")},maximum:function(e,t){if(e>=t)return Math.min(e,t);throw new Error("sub type has a weaker constraint for maximum than base type")},minItems:function(e,t){if(e<=t)return Math.max(e,t);throw new Error("sub type has a weaker constraint for min-items than base type")},maxItems:function(e,t){if(e>=t)return Math.min(e,t);throw new Error("sub type has a weaker constraint for max-items than base type")},format:function(e,t){if(null===e||e===t)return e||t;throw new Error("Different values for format constraint ["+e+" "+t+"]")},pattern:function(e,t){if(null===e||e===t)return e||t;throw new Error("Different values for pattern constraint ["+e+" "+t+"]")},discriminator:function(e,t){if(null===e||e===t)return e||t;throw new Error("Different values for discriminator constraint ["+e+" "+t+"]")},discriminatorValue:function(e,t){if(null===e||e===t)return e||t;throw new Error("Different values for discriminator-value constraint ["+e+" "+t+"]")},enumValues:function(t,e){if(0===e.filter(function(n){return-1===t.indexOf(n)}).length)return e;throw new Error("sub type has a weaker constraint for enum-values than base type")},uniqueItems:function(e,t){if(!e||e===t)return e&&t;throw new Error("sub type has a weaker constraint for unique-items than base type")},required:function(e,t){if(!e||e===t)return e||t;throw new Error("Error in required property, making optional base class required property")},additionalProperties:function(e,t){if(!e||e===t)return e&&t;throw new Error("sub type has a weaker constraint for additional-properties than base type")}},l={type:!0,properties:!0,items:!0,anyOf:!0};t.exports=i},{"./util":6}],6:[function(e,t,n){var i=e("lodash"),r=i.keyBy(["any","boolean","date-only","datetime","datetime-only","time-only","number","integer","string","nil","file","xml","json"]);t.exports.isOpaqueType=function(t){return t in r},t.exports.consistencyCheck=function(t){return void 0!==t.minProperties&&void 0!==t.maxProperties&&t.minProperties>t.maxProperties&&n("numProperties",t.minProperties,t.maxProperties),void 0!==t.minLength&&void 0!==t.maxLength&&t.minLength>t.maxLength&&n("length",t.minLength,t.maxLength),void 0!==t.minimum&&void 0!==t.maximum&&t.minimum>t.maximum&&n("size",t.minimum,t.maximum),void 0!==t.minItems&&void 0!==t.maxItems&&t.minItems>t.maxItems&&n("numItems",t.minItems,t.maxItems),t}},{lodash:7}],7:[function(e,t,n){(function(e){(function(){function i(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t,n,i){for(var r=-1,a=null==e?0:e.length;++r<a;){var o=e[r];t(i,o,n(o),e)}return i}function a(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function o(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function d(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function l(e,t){for(var n=-1,i=null==e?0:e.length,r=0,a=[];++n<i;){var o=e[n];t(o,n,e)&&(a[r++]=o)}return a}function s(e,t){return!!(null==e?0:e.length)&&k(e,t,0)>-1}function u(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function p(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function c(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function f(e,t,n,i){var r=-1,a=null==e?0:e.length;for(i&&a&&(n=e[++r]);++r<a;)n=t(n,e[r],r,e);return n}function h(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function g(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function y(e){return e.split("")}function m(e){return e.match(Pt)||[]}function x(e,t,n){var i;return n(e,function(e,n,r){if(t(e,n,r))return i=n,!1}),i}function b(e,t,n,i){for(var r=e.length,a=n+(i?1:-1);i?a--:++a<r;)if(t(e[a],a,e))return a;return-1}function k(e,t,n){return t===t?J(e,t,n):b(e,T,n)}function j(e,t,n,i){for(var r=n-1,a=e.length;++r<a;)if(i(e[r],t))return r;return-1}function T(e){return e!==e}function v(e,t){var n=null==e?0:e.length;return n?S(e,t)/n:Ce}function I(e){return function(t){return null==t?ne:t[e]}}function O(e){return function(t){return null==e?ne:e[t]}}function w(e,t,n,i,r){return r(e,function(e,r,a){n=i?(i=!1,e):t(n,e,r,a)}),n}function A(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function S(e,t){for(var n,i=-1,r=e.length;++i<r;){var a=t(e[i]);a!==ne&&(n=n===ne?a:n+a)}return n}function E(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function L(e,t){return p(t,function(t){return[t,e[t]]})}function z(e){return function(t){return e(t)}}function N(e,t){return p(t,function(t){return e[t]})}function R(e,t){return e.has(t)}function C(e,t){for(var n=-1,i=e.length;++n<i&&k(t,e[n],0)>-1;);return n}function W(e,t){for(var n=e.length;n--&&k(t,e[n],0)>-1;);return n}function D(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}function U(e){return"\\"+Xn[e]}function B(e,t){return null==e?ne:e[t]}function P(e){return $n.test(e)}function q(e){return Vn.test(e)}function F(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function M(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function $(e,t){return function(n){return e(t(n))}}function V(e,t){for(var n=-1,i=e.length,r=0,a=[];++n<i;){var o=e[n];o!==t&&o!==se||(e[n]=se,a[r++]=n)}return a}function K(e,t){return"__proto__"==t?ne:e[t]}function G(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Z(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function J(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function H(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}function Y(e){return P(e)?X(e):gi(e)}function Q(e){return P(e)?ee(e):y(e)}function X(e){for(var t=Fn.lastIndex=0;Fn.test(e);)++t;return t}function ee(e){return e.match(Fn)||[]}function te(e){return e.match(Mn)||[]}var ne,re=200,ae="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",oe="Expected a function",de="__lodash_hash_undefined__",le=500,se="__lodash_placeholder__",ue=1,pe=2,ce=4,fe=1,_e=2,he=1,ge=2,ye=4,me=8,xe=16,be=32,ke=64,je=128,Te=256,ve=512,Ie=30,Oe="...",we=800,Ae=16,Se=1,Ee=2,ze=1/0,Ne=9007199254740991,Re=1.7976931348623157e308,Ce=NaN,We=4294967295,De=We-1,Ue=We>>>1,Be=[["ary",je],["bind",he],["bindKey",ge],["curry",me],["curryRight",xe],["flip",ve],["partial",be],["partialRight",ke],["rearg",Te]],Pe="[object Arguments]",qe="[object Array]",Fe="[object AsyncFunction]",Me="[object Boolean]",$e="[object Date]",Ve="[object DOMException]",Ke="[object Error]",Ge="[object Function]",Ze="[object GeneratorFunction]",Je="[object Map]",He="[object Number]",Ye="[object Null]",Qe="[object Object]",Xe="[object Promise]",et="[object Proxy]",tt="[object RegExp]",nt="[object Set]",it="[object String]",rt="[object Symbol]",at="[object Undefined]",ot="[object WeakMap]",dt="[object WeakSet]",lt="[object ArrayBuffer]",st="[object DataView]",ut="[object Float32Array]",pt="[object Float64Array]",ct="[object Int8Array]",ft="[object Int16Array]",_t="[object Int32Array]",ht="[object Uint8Array]",gt="[object Uint8ClampedArray]",yt="[object Uint16Array]",mt="[object Uint32Array]",xt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,kt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,jt=/&(?:amp|lt|gt|quot|#39);/g,Tt=/[&<>"']/g,vt=RegExp(jt.source),It=RegExp(Tt.source),Ot=/<%-([\s\S]+?)%>/g,wt=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,St=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Et=/^\w*$/,Lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zt=/[\\^$.*+?()[\]{}|]/g,Nt=RegExp(zt.source),Rt=/^\s+|\s+$/g,Ct=/^\s+/,Wt=/\s+$/,Dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ut=/\{\n\/\* \[wrapped with (.+)\] \*/,Bt=/,? & /,Pt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/\\(\\)?/g,Ft=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Mt=/\w*$/,$t=/^[-+]0x[0-9a-f]+$/i,Vt=/^0b[01]+$/i,Kt=/^\[object .+?Constructor\]$/,Gt=/^0o[0-7]+$/i,Zt=/^(?:0|[1-9]\d*)$/,Jt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ht=/($^)/,Yt=/['\n\r\u2028\u2029\\]/g,Qt="\\ud800-\\udfff",nn="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",rn="\\u2700-\\u27bf",an="a-z\\xdf-\\xf6\\xf8-\\xff",un="A-Z\\xc0-\\xd6\\xd8-\\xde",pn="\\ufe0e\\ufe0f",cn="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fn="['’]",hn="["+cn+"]",gn="["+nn+"]",xn="["+an+"]",bn="[^"+Qt+cn+"\\d+"+rn+an+un+"]",kn="\\ud83c[\\udffb-\\udfff]",Tn="[^"+Qt+"]",vn="(?:\\ud83c[\\udde6-\\uddff]){2}",In="[\\ud800-\\udbff][\\udc00-\\udfff]",On="["+un+"]",wn="\\u200d",An="(?:"+xn+"|"+bn+")",En="(?:['’](?:d|ll|m|re|s|t|ve))?",Ln="(?:['’](?:D|LL|M|RE|S|T|VE))?",zn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Nn="["+pn+"]?",Rn="(?:"+wn+"(?:"+[Tn,vn,In].join("|")+")"+Nn+zn+")*",Dn=Nn+zn+Rn,Un="(?:"+["[\\u2700-\\u27bf]",vn,In].join("|")+")"+Dn,Bn="(?:"+[Tn+gn+"?",gn,vn,In,"[\\ud800-\\udfff]"].join("|")+")",Pn=RegExp(fn,"g"),qn=RegExp(gn,"g"),Fn=RegExp(kn+"(?="+kn+")|"+Bn+Dn,"g"),Mn=RegExp([On+"?"+xn+"+"+En+"(?="+[hn,On,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+"+Ln+"(?="+[hn,On+An,"$"].join("|")+")",On+"?"+An+"+"+En,On+"+"+Ln,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",Un].join("|"),"g"),$n=RegExp("["+wn+Qt+nn+pn+"]"),Vn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gn=-1,Zn={};Zn[ut]=Zn[pt]=Zn[ct]=Zn[ft]=Zn[_t]=Zn[ht]=Zn[gt]=Zn[yt]=Zn[mt]=!0,Zn[Pe]=Zn[qe]=Zn[lt]=Zn[Me]=Zn[st]=Zn[$e]=Zn[Ke]=Zn[Ge]=Zn[Je]=Zn[He]=Zn[Qe]=Zn[tt]=Zn[nt]=Zn[it]=Zn[ot]=!1;var Jn={};Jn[Pe]=Jn[qe]=Jn[lt]=Jn[st]=Jn[Me]=Jn[$e]=Jn[ut]=Jn[pt]=Jn[ct]=Jn[ft]=Jn[_t]=Jn[Je]=Jn[He]=Jn[Qe]=Jn[tt]=Jn[nt]=Jn[it]=Jn[rt]=Jn[ht]=Jn[gt]=Jn[yt]=Jn[mt]=!0,Jn[Ke]=Jn[Ge]=Jn[ot]=!1;var Hn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Yn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Xn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ei=parseFloat,ti=parseInt,ni="object"==(void 0===e?"undefined":_typeof(e))&&e&&e.Object===Object&&e,ii="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self&&self.Object===Object&&self,ri=ni||ii||Function("return this")(),ai="object"==(void 0===n?"undefined":_typeof(n))&&n&&!n.nodeType&&n,oi=ai&&"object"==(void 0===t?"undefined":_typeof(t))&&t&&!t.nodeType&&t,di=oi&&oi.exports===ai,li=di&&ni.process,si=function(){try{var e=oi&&oi.require&&oi.require("util").types;return e||li&&li.binding&&li.binding("util")}catch(t){}}(),ui=si&&si.isArrayBuffer,pi=si&&si.isDate,ci=si&&si.isMap,fi=si&&si.isRegExp,_i=si&&si.isSet,hi=si&&si.isTypedArray,gi=I("length"),yi=O(Hn),mi=O(Yn),xi=O(Qn),ki=function e(t){function n(e){if(al(e)&&!gc(e)&&!(e instanceof O)){if(e instanceof y)return e;if(gu.call(e,"__wrapped__"))return to(e)}return new y(e)}function _(){}function y(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=ne}function O(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=We,this.__views__=[]}function J(){var e=new O(this.__wrapped__);return e.__actions__=Wr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Wr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Wr(this.__views__),e}function X(){if(this.__filtered__){var e=new O(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function ee(){var e=this.__wrapped__.value(),t=this.__dir__,n=gc(e),i=t<0,r=n?e.length:0,a=Ia(0,r,this.__views__),o=a.start,d=a.end,l=d-o,s=i?d:o-1,u=this.__iteratees__,p=u.length,c=0,f=Ku(l,this.__takeCount__);if(!n||!i&&r==l&&f==l)return xr(e,this.__actions__);var _=[];outer:for(;l--&&c<f;){s+=t;for(var h=-1,g=e[s];++h<p;){var y=u[h],m=y.iteratee,x=y.type,b=m(g);if(x==Ee)g=b;else if(!b){if(x==Se)continue outer;break outer}}_[c++]=g}return _}function Pt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Qt(){this.__data__=np?np(null):{},this.size=0}function Xt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function en(e){var t=this.__data__;if(np){var n=t[e];return n===de?ne:n}return gu.call(t,e)?t[e]:ne}function tn(e){var t=this.__data__;return np?t[e]!==ne:gu.call(t,e)}function nn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=np&&t===ne?de:t,this}function rn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function an(){this.__data__=[],this.size=0}function on(e){var t=this.__data__,n=Ln(t,e);return!(n<0)&&(n==t.length-1?t.pop():Eu.call(t,n,1),--this.size,!0)}function dn(e){var t=this.__data__,n=Ln(t,e);return n<0?ne:t[n][1]}function ln(e){return Ln(this.__data__,e)>-1}function sn(e,t){var n=this.__data__,i=Ln(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function un(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function pn(){this.size=0,this.__data__={hash:new Pt,map:new(Qu||rn),string:new Pt}}function cn(e){var t=ka(this,e).delete(e);return this.size-=t?1:0,t}function fn(e){return ka(this,e).get(e)}function _n(e){return ka(this,e).has(e)}function hn(e,t){var n=ka(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function gn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new un;++t<n;)this.add(e[t])}function yn(e){return this.__data__.set(e,de),this}function mn(e){return this.__data__.has(e)}function xn(e){var t=this.__data__=new rn(e);this.size=t.size}function bn(){this.__data__=new rn,this.size=0}function kn(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function jn(e){return this.__data__.get(e)}function Tn(e){return this.__data__.has(e)}function vn(e,t){var n=this.__data__;if(n instanceof rn){var i=n.__data__;if(!Qu||i.length<re-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new un(i)}return n.set(e,t),this.size=n.size,this}function In(e,t){var n=gc(e),i=!n&&hc(e),r=!n&&!i&&mc(e),a=!n&&!i&&!r&&Tc(e),o=n||i||r||a,d=o?E(e.length,su):[],l=d.length;for(var s in e)!t&&!gu.call(e,s)||o&&("length"==s||r&&("offset"==s||"parent"==s)||a&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Na(s,l))||d.push(s);return d}function On(e){var t=e.length;return t?e[er(0,t-1)]:ne}function wn(e,t){return Ya(Wr(e),Dn(t,0,e.length))}function An(e){return Ya(Wr(e))}function Sn(e,t,n){(n===ne||Vd(e[t],n))&&(n!==ne||t in e)||Cn(e,t,n)}function En(e,t,n){var i=e[t];gu.call(e,t)&&Vd(i,n)&&(n!==ne||t in e)||Cn(e,t,n)}function Ln(e,t){for(var n=e.length;n--;)if(Vd(e[n][0],t))return n;return-1}function zn(e,t,n,i){return _p(e,function(e,r,a){t(i,e,n(e),a)}),i}function Nn(e,t){return e&&Dr(t,Pl(t),e)}function Rn(e,t){return e&&Dr(t,ql(t),e)}function Cn(e,t,n){"__proto__"==t&&Ru?Ru(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Wn(e,t){for(var n=-1,i=t.length,r=nu(i),a=null==e;++n<i;)r[n]=a?ne:Dl(e,t[n]);return r}function Dn(e,t,n){return e===e&&(n!==ne&&(e=e<=n?e:n),t!==ne&&(e=e>=t?e:t)),e}function Un(e,t,n,i,r,o){var d,l=t&ue,s=t&pe,u=t&ce;if(n&&(d=r?n(e,i,r,o):n(e)),d!==ne)return d;if(!rl(e))return e;var p=gc(e);if(p){if(d=Aa(e),!l)return Wr(e,d)}else{var c=Op(e),f=c==Ge||c==Ze;if(mc(e))return Or(e,l);if(c==Qe||c==Pe||f&&!r){if(d=s||f?{}:Sa(e),!l)return s?Br(e,Rn(d,e)):Ur(e,Nn(d,e))}else{if(!Jn[c])return r?e:{};d=Ea(e,c,l)}}o||(o=new xn);var _=o.get(e);if(_)return _;if(o.set(e,d),jc(e))return e.forEach(function(i){d.add(Un(i,t,n,i,e,o))}),d;if(bc(e))return e.forEach(function(i,r){d.set(r,Un(i,t,n,r,e,o))}),d;var h=u?s?ya:ga:s?ql:Pl,g=p?ne:h(e);return a(g||e,function(i,r){g&&(r=i,i=e[r]),En(d,r,Un(i,t,n,r,e,o))}),d}function Bn(e){var t=Pl(e);return function(n){return Fn(n,e,t)}}function Fn(e,t,n){var i=n.length;if(null==e)return!i;for(e=du(e);i--;){var r=n[i],a=t[r],o=e[r];if(o===ne&&!(r in e)||!a(o))return!1}return!0}function Mn(e,t,n){if("function"!=typeof e)throw new uu(oe);return Sp(function(){e.apply(ne,n)},t)}function $n(e,t,n,i){var r=-1,a=s,o=!0,d=e.length,l=[],c=t.length;if(!d)return l;n&&(t=p(t,z(n))),i?(a=u,o=!1):t.length>=re&&(a=R,o=!1,t=new gn(t));outer:for(;++r<d;){var f=e[r],_=null==n?f:n(f);if(f=i||0!==f?f:0,o&&_===_){for(var h=c;h--;)if(t[h]===_)continue outer;l.push(f)}else a(t,_,i)||l.push(f)}return l}function Vn(e,t){var n=!0;return _p(e,function(e,i,r){return n=!!t(e,i,r)}),n}function Hn(e,t,n){for(var i=-1,r=e.length;++i<r;){var a=e[i],o=t(a);if(null!=o&&(d===ne?o===o&&!gl(o):n(o,d)))var d=o,l=a}return l}function Yn(e,t,n,i){var r=e.length;for(n=jl(n),n<0&&(n=-n>r?0:r+n),i=i===ne||i>r?r:jl(i),i<0&&(i+=r),i=n>i?0:Tl(i);n<i;)e[n++]=t;return e}function Qn(e,t){var n=[];return _p(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function Xn(e,t,n,i,r){var a=-1,o=e.length;for(n||(n=za),r||(r=[]);++a<o;){var d=e[a];t>0&&n(d)?t>1?Xn(d,t-1,n,i,r):c(r,d):i||(r[r.length]=d)}return r}function ni(e,t){return e&&gp(e,t,Pl)}function ii(e,t){return e&&yp(e,t,Pl)}function ai(e,t){return l(t,function(t){return tl(e[t])})}function oi(e,t){t=vr(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[Qa(t[n++])];return n&&n==i?e:ne}function li(e,t,n){var i=t(e);return gc(e)?i:c(i,n(e))}function si(e){return null==e?e===ne?at:Ye:Nu&&Nu in du(e)?va(e):Va(e)}function gi(e,t){return e>t}function bi(e,t){return null!=e&&gu.call(e,t)}function ji(e,t){return null!=e&&t in du(e)}function Ti(e,t,n){return e>=Ku(t,n)&&e<Vu(t,n)}function vi(e,t,n){for(var i=n?u:s,r=e[0].length,a=e.length,o=a,d=nu(a),l=1/0,c=[];o--;){var f=e[o];o&&t&&(f=p(f,z(t))),l=Ku(f.length,l),d[o]=!n&&(t||r>=120&&f.length>=120)?new gn(o&&f):ne}f=e[0];var _=-1,h=d[0];outer:for(;++_<r&&c.length<l;){var g=f[_],y=t?t(g):g;if(g=n||0!==g?g:0,!(h?R(h,y):i(c,y,n))){for(o=a;--o;){var m=d[o];if(!(m?R(m,y):i(e[o],y,n)))continue outer}h&&h.push(y),c.push(g)}}return c}function Ii(e,t,n,i){return ni(e,function(e,r,a){t(i,n(e),r,a)}),i}function Oi(e,t,n){t=vr(t,e),e=Ga(e,t);var r=null==e?e:e[Qa(ko(t))];return null==r?ne:i(r,e,n)}function wi(e){return al(e)&&si(e)==Pe}function Ai(e){return al(e)&&si(e)==lt}function Si(e){return al(e)&&si(e)==$e}function Ei(e,t,n,i,r){return e===t||(null==e||null==t||!al(e)&&!al(t)?e!==e&&t!==t:Li(e,t,n,i,Ei,r))}function Li(e,t,n,i,r,a){var o=gc(e),d=gc(t),l=o?qe:Op(e),s=d?qe:Op(t);l=l==Pe?Qe:l,s=s==Pe?Qe:s;var u=l==Qe,p=s==Qe,c=l==s;if(c&&mc(e)){if(!mc(t))return!1;o=!0,u=!1}if(c&&!u)return a||(a=new xn),o||Tc(e)?ca(e,t,n,i,r,a):fa(e,t,l,n,i,r,a);if(!(n&fe)){var f=u&&gu.call(e,"__wrapped__"),_=p&&gu.call(t,"__wrapped__");if(f||_){var h=f?e.value():e,g=_?t.value():t;return a||(a=new xn),r(h,g,n,i,a)}}return!!c&&(a||(a=new xn),_a(e,t,n,i,r,a))}function zi(e){return al(e)&&Op(e)==Je}function Ni(e,t,n,i){var r=n.length,a=r,o=!i;if(null==e)return!a;for(e=du(e);r--;){var d=n[r];if(o&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++r<a;){d=n[r];var l=d[0],s=e[l],u=d[1];if(o&&d[2]){if(s===ne&&!(l in e))return!1}else{var p=new xn;if(i)var c=i(s,u,l,e,t,p);if(!(c===ne?Ei(u,s,fe|_e,i,p):c))return!1}}return!0}function Ri(e){return!(!rl(e)||Ua(e))&&(tl(e)?ju:Kt).test(Xa(e))}function Ci(e){return al(e)&&si(e)==tt}function Wi(e){return al(e)&&Op(e)==nt}function Di(e){return al(e)&&il(e.length)&&!!Zn[si(e)]}function Ui(e){return"function"==typeof e?e:null==e?Es:"object"==(void 0===e?"undefined":_typeof(e))?gc(e)?$i(e[0],e[1]):Mi(e):Us(e)}function Bi(e){if(!Ba(e))return $u(e);var t=[];for(var n in du(e))gu.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Pi(e){if(!rl(e))return $a(e);var t=Ba(e),n=[];for(var i in e)("constructor"!=i||!t&&gu.call(e,i))&&n.push(i);return n}function qi(e,t){return e<t}function Fi(e,t){var n=-1,i=Kd(e)?nu(e.length):[];return _p(e,function(e,r,a){i[++n]=t(e,r,a)}),i}function Mi(e){var t=ja(e);return 1==t.length&&t[0][2]?qa(t[0][0],t[0][1]):function(n){return n===e||Ni(n,e,t)}}function $i(e,t){return Ca(e)&&Pa(t)?qa(Qa(e),t):function(n){var i=Dl(n,e);return i===ne&&i===t?Bl(n,e):Ei(t,i,fe|_e)}}function Vi(e,t,n,i,r){e!==t&&gp(t,function(a,o){if(rl(a))r||(r=new xn),Ki(e,t,o,n,Vi,i,r);else{var d=i?i(K(e,o),a,o+"",e,t,r):ne;d===ne&&(d=a),Sn(e,o,d)}},ql)}function Ki(e,t,n,i,r,a,o){var d=K(e,n),l=K(t,n),s=o.get(l);if(s)return void Sn(e,n,s);var u=a?a(d,l,n+"",e,t,o):ne,p=u===ne;if(p){var c=gc(l),f=!c&&mc(l),_=!c&&!f&&Tc(l);u=l,c||f||_?gc(d)?u=d:Gd(d)?u=Wr(d):f?(p=!1,u=Or(l,!0)):_?(p=!1,u=Lr(l,!0)):u=[]:fl(l)||hc(l)?(u=d,hc(d)?u=Il(d):(!rl(d)||i&&tl(d))&&(u=Sa(l))):p=!1}p&&(o.set(l,u),r(u,l,i,a,o),o.delete(l)),Sn(e,n,u)}function Gi(e,t){var i=e.length;if(i)return t+=t<0?i:0,Na(t,i)?e[t]:ne}function Zi(e,t,n){var i=-1 ;return t=p(t.length?t:[Es],z(ba())),A(Fi(e,function(e,n,r){return{criteria:p(t,function(t){return t(e)}),index:++i,value:e}}),function(e,t){return Nr(e,t,n)})}function Ji(e,t){return Hi(e,t,function(t,n){return Bl(e,n)})}function Hi(e,t,n){for(var i=-1,r=t.length,a={};++i<r;){var o=t[i],d=oi(e,o);n(d,o)&&or(a,vr(o,e),d)}return a}function Yi(e){return function(t){return oi(t,e)}}function Qi(e,t,n,i){var r=i?j:k,a=-1,o=t.length,d=e;for(e===t&&(t=Wr(t)),n&&(d=p(e,z(n)));++a<o;)for(var l=0,s=t[a],u=n?n(s):s;(l=r(d,u,l,i))>-1;)d!==e&&Eu.call(d,l,1),Eu.call(e,l,1);return e}function Xi(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==a){var a=r;Na(r)?Eu.call(e,r,1):gr(e,r)}}return e}function er(e,t){return e+Bu(Ju()*(t-e+1))}function tr(e,t,n,i){for(var r=-1,a=Vu(Uu((t-e)/(n||1)),0),o=nu(a);a--;)o[i?a:++r]=e,e+=n;return o}function nr(e,t){var i="";if(!e||t<1||t>Ne)return i;do{t%2&&(i+=e),(t=Bu(t/2))&&(e+=e)}while(t);return i}function ir(e,t){return Ep(Ka(e,t,Es),e+"")}function rr(e){return On(Xl(e))}function ar(e,t){var n=Xl(e);return Ya(n,Dn(t,0,n.length))}function or(e,t,n,i){if(!rl(e))return e;t=vr(t,e);for(var r=-1,a=t.length,o=a-1,d=e;null!=d&&++r<a;){var l=Qa(t[r]),s=n;if(r!=o){var u=d[l];s=i?i(u,l,d):ne,s===ne&&(s=rl(u)?u:Na(t[r+1])?[]:{})}En(d,l,s),d=d[l]}return e}function dr(e){return Ya(Xl(e))}function lr(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var a=nu(r);++i<r;)a[i]=e[i+t];return a}function sr(e,t){var n;return _p(e,function(e,i,r){return!(n=t(e,i,r))}),!!n}function ur(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t===t&&r<=Ue){for(;i<r;){var a=i+r>>>1,o=e[a];null!==o&&!gl(o)&&(n?o<=t:o<t)?i=a+1:r=a}return r}return pr(e,t,Es,n)}function pr(e,t,n,i){t=n(t);for(var r=0,a=null==e?0:e.length,o=t!==t,d=null===t,l=gl(t),s=t===ne;r<a;){var u=Bu((r+a)/2),p=n(e[u]),c=p!==ne,f=null===p,_=p===p,h=gl(p);if(o)var g=i||_;else g=s?_&&(i||c):d?_&&c&&(i||!f):l?_&&c&&!f&&(i||!h):!f&&!h&&(i?p<=t:p<t);g?r=u+1:a=u}return Ku(a,De)}function cr(e,t){for(var n=-1,i=e.length,r=0,a=[];++n<i;){var o=e[n],d=t?t(o):o;if(!n||!Vd(d,l)){var l=d;a[r++]=0===o?0:o}}return a}function fr(e){return"number"==typeof e?e:gl(e)?Ce:+e}function _r(e){if("string"==typeof e)return e;if(gc(e))return p(e,_r)+"";if(gl(e))return cp?cp.call(e):"";var t=e+"";return"0"==t&&1/e==-ze?"-0":t}function hr(e,t,n){var i=-1,r=s,a=e.length,o=!0,d=[],l=d;if(n)o=!1,r=u;else if(a>=re){var p=t?null:jp(e);if(p)return G(p);o=!1,r=R,l=new gn}else l=t?[]:d;outer:for(;++i<a;){var c=e[i],f=t?t(c):c;if(c=n||0!==c?c:0,o&&f===f){for(var _=l.length;_--;)if(l[_]===f)continue outer;t&&l.push(f),d.push(c)}else r(l,f,n)||(l!==d&&l.push(f),d.push(c))}return d}function gr(e,t){return t=vr(t,e),null==(e=Ga(e,t))||delete e[Qa(ko(t))]}function yr(e,t,n,i){return or(e,t,n(oi(e,t)),i)}function mr(e,t,n,i){for(var r=e.length,a=i?r:-1;(i?a--:++a<r)&&t(e[a],a,e););return n?lr(e,i?0:a,i?a+1:r):lr(e,i?a+1:0,i?r:a)}function xr(e,t){var n=e;return n instanceof O&&(n=n.value()),f(t,function(e,t){return t.func.apply(t.thisArg,c([e],t.args))},n)}function br(e,t,n){var i=e.length;if(i<2)return i?hr(e[0]):[];for(var r=-1,a=nu(i);++r<i;)for(var o=e[r],d=-1;++d<i;)d!=r&&(a[r]=$n(a[r]||o,e[d],t,n));return hr(Xn(a,1),t,n)}function kr(e,t,n){for(var i=-1,r=e.length,a=t.length,o={};++i<r;){var d=i<a?t[i]:ne;n(o,e[i],d)}return o}function jr(e){return Gd(e)?e:[]}function Tr(e){return"function"==typeof e?e:Es}function vr(e,t){return gc(e)?e:Ca(e,t)?[e]:Lp(wl(e))}function Ir(e,t,n){var i=e.length;return n=n===ne?i:n,!t&&n>=i?e:lr(e,t,n)}function Or(e,t){if(t)return e.slice();var n=e.length,i=Ou?Ou(n):new e.constructor(n);return e.copy(i),i}function wr(e){var t=new e.constructor(e.byteLength);return new Iu(t).set(new Iu(e)),t}function Ar(e,t){var n=t?wr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Sr(e){var t=new e.constructor(e.source,Mt.exec(e));return t.lastIndex=e.lastIndex,t}function Er(e){return pp?du(pp.call(e)):{}}function Lr(e,t){var n=t?wr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function zr(e,t){if(e!==t){var n=e!==ne,i=null===e,r=e===e,a=gl(e),o=t!==ne,d=null===t,l=t===t,s=gl(t);if(!d&&!s&&!a&&e>t||a&&o&&l&&!d&&!s||i&&o&&l||!n&&l||!r)return 1;if(!i&&!a&&!s&&e<t||s&&n&&r&&!i&&!a||d&&n&&r||!o&&r||!l)return-1}return 0}function Nr(e,t,n){for(var i=-1,r=e.criteria,a=t.criteria,o=r.length,d=n.length;++i<o;){var l=zr(r[i],a[i]);if(l){if(i>=d)return l;return l*("desc"==n[i]?-1:1)}}return e.index-t.index}function Rr(e,t,n,i){for(var r=-1,a=e.length,o=n.length,d=-1,l=t.length,s=Vu(a-o,0),u=nu(l+s),p=!i;++d<l;)u[d]=t[d];for(;++r<o;)(p||r<a)&&(u[n[r]]=e[r]);for(;s--;)u[d++]=e[r++];return u}function Cr(e,t,n,i){for(var r=-1,a=e.length,o=-1,d=n.length,l=-1,s=t.length,u=Vu(a-d,0),p=nu(u+s),c=!i;++r<u;)p[r]=e[r];for(var f=r;++l<s;)p[f+l]=t[l];for(;++o<d;)(c||r<a)&&(p[f+n[o]]=e[r++]);return p}function Wr(e,t){var n=-1,i=e.length;for(t||(t=nu(i));++n<i;)t[n]=e[n];return t}function Dr(e,t,n,i){var r=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var d=t[a],l=i?i(n[d],e[d],d,n,e):ne;l===ne&&(l=e[d]),r?Cn(n,d,l):En(n,d,l)}return n}function Ur(e,t){return Dr(e,vp(e),t)}function Br(e,t){return Dr(e,Ip(e),t)}function Pr(e,t){return function(n,i){var a=gc(n)?r:zn,o=t?t():{};return a(n,e,ba(i,2),o)}}function qr(e){return ir(function(t,n){var i=-1,r=n.length,a=r>1?n[r-1]:ne,o=r>2?n[2]:ne;for(a=e.length>3&&"function"==typeof a?(r--,a):ne,o&&Ra(n[0],n[1],o)&&(a=r<3?ne:a,r=1),t=du(t);++i<r;){var d=n[i];d&&e(t,d,i,a)}return t})}function Fr(e,t){return function(n,i){if(null==n)return n;if(!Kd(n))return e(n,i);for(var r=n.length,a=t?r:-1,o=du(n);(t?a--:++a<r)&&!1!==i(o[a],a,o););return n}}function Mr(e){return function(t,n,i){for(var r=-1,a=du(t),o=i(t),d=o.length;d--;){var l=o[e?d:++r];if(!1===n(a[l],l,a))break}return t}}function $r(e,t,n){function i(){return(this&&this!==ri&&this instanceof i?a:e).apply(r?n:this,arguments)}var r=t&he,a=Gr(e);return i}function Vr(e){return function(t){t=wl(t);var n=P(t)?Q(t):ne,i=n?n[0]:t.charAt(0),r=n?Ir(n,1).join(""):t.slice(1);return i[e]()+r}}function Kr(e){return function(t){return f(Is(as(t).replace(Pn,"")),e,"")}}function Gr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=fp(e.prototype),i=e.apply(n,t);return rl(i)?i:n}}function Zr(e,t,n){function r(){for(var o=arguments.length,d=nu(o),l=o,s=xa(r);l--;)d[l]=arguments[l];var u=o<3&&d[0]!==s&&d[o-1]!==s?[]:V(d,s);return(o-=u.length)<n?aa(e,t,Yr,r.placeholder,ne,d,u,ne,ne,n-o):i(this&&this!==ri&&this instanceof r?a:e,this,d)}var a=Gr(e);return r}function Jr(e){return function(t,n,i){var r=du(t);if(!Kd(t)){var a=ba(n,3);t=Pl(t),n=function(e){return a(r[e],e,r)}}var o=e(t,n,i);return o>-1?r[a?t[o]:o]:ne}}function Hr(e){return ha(function(t){var n=t.length,i=n,r=y.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new uu(oe);if(r&&!o&&"wrapper"==ma(a))var o=new y([],!0)}for(i=o?i:n;++i<n;){a=t[i];var d=ma(a),l="wrapper"==d?Tp(a):ne;o=l&&Da(l[0])&&l[1]==(je|me|be|Te)&&!l[4].length&&1==l[9]?o[ma(l[0])].apply(o,l[3]):1==a.length&&Da(a)?o[d]():o.thru(a)}return function(){var e=arguments,i=e[0];if(o&&1==e.length&&gc(i))return o.plant(i).value();for(var r=0,a=n?t[r].apply(this,e):i;++r<n;)a=t[r].call(this,a);return a}})}function Yr(e,t,n,i,r,a,o,d,l,s){function u(){for(var y=arguments.length,m=nu(y),x=y;x--;)m[x]=arguments[x];if(_)var b=xa(u),k=D(m,b);if(i&&(m=Rr(m,i,r,_)),a&&(m=Cr(m,a,o,_)),y-=k,_&&y<s){var j=V(m,b);return aa(e,t,Yr,u.placeholder,n,m,j,d,l,s-y)}var T=c?n:this,v=f?T[e]:e;return y=m.length,d?m=Za(m,d):h&&y>1&&m.reverse(),p&&l<y&&(m.length=l),this&&this!==ri&&this instanceof u&&(v=g||Gr(v)),v.apply(T,m)}var p=t&je,c=t&he,f=t&ge,_=t&(me|xe),h=t&ve,g=f?ne:Gr(e);return u}function Qr(e,t){return function(n,i){return Ii(n,e,t(i),{})}}function Xr(e,t){return function(n,i){var r;if(n===ne&&i===ne)return t;if(n!==ne&&(r=n),i!==ne){if(r===ne)return i;"string"==typeof n||"string"==typeof i?(n=_r(n),i=_r(i)):(n=fr(n),i=fr(i)),r=e(n,i)}return r}}function ea(e){return ha(function(t){return t=p(t,z(ba())),ir(function(n){var r=this;return e(t,function(e){return i(e,r,n)})})})}function ta(e,t){t=t===ne?" ":_r(t);var n=t.length;if(n<2)return n?nr(t,e):t;var i=nr(t,Uu(e/Y(t)));return P(t)?Ir(Q(i),0,e).join(""):i.slice(0,e)}function na(e,t,n,r){function a(){for(var t=-1,l=arguments.length,s=-1,u=r.length,p=nu(u+l),c=this&&this!==ri&&this instanceof a?d:e;++s<u;)p[s]=r[s];for(;l--;)p[s++]=arguments[++t];return i(c,o?n:this,p)}var o=t&he,d=Gr(e);return a}function ia(e){return function(t,n,i){return i&&"number"!=typeof i&&Ra(t,n,i)&&(n=i=ne),t=kl(t),n===ne?(n=t,t=0):n=kl(n),i=i===ne?t<n?1:-1:kl(i),tr(t,n,i,e)}}function ra(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=vl(t),n=vl(n)),e(t,n)}}function aa(e,t,n,i,r,a,o,d,l,s){var u=t&me,p=u?o:ne,c=u?ne:o,f=u?a:ne,_=u?ne:a;t|=u?be:ke,(t&=~(u?ke:be))&ye||(t&=~(he|ge));var h=[e,t,r,f,p,_,c,d,l,s],g=n.apply(ne,h);return Da(e)&&Ap(g,h),g.placeholder=i,Ja(g,e,t)}function oa(e){var t=ou[e];return function(e,n){if(e=vl(e),n=null==n?0:Ku(jl(n),292)){var i=(wl(e)+"e").split("e");return i=(wl(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(e)}}function da(e){return function(t){var n=Op(t);return n==Je?M(t):n==nt?Z(t):L(t,e(t))}}function la(e,t,n,i,r,a,o,d){var l=t&ge;if(!l&&"function"!=typeof e)throw new uu(oe);var s=i?i.length:0;if(s||(t&=~(be|ke),i=r=ne),o=o===ne?o:Vu(jl(o),0),d=d===ne?d:jl(d),s-=r?r.length:0,t&ke){var u=i,p=r;i=r=ne}var c=l?ne:Tp(e),f=[e,t,n,i,r,u,p,a,o,d];if(c&&Ma(f,c),e=f[0],t=f[1],n=f[2],i=f[3],r=f[4],d=f[9]=f[9]===ne?l?0:e.length:Vu(f[9]-s,0),!d&&t&(me|xe)&&(t&=~(me|xe)),t&&t!=he)_=t==me||t==xe?Zr(e,t,d):t!=be&&t!=(he|be)||r.length?Yr.apply(ne,f):na(e,t,n,i);else var _=$r(e,t,n);return Ja((c?mp:Ap)(_,f),e,t)}function sa(e,t,n,i){return e===ne||Vd(e,fu[n])&&!gu.call(i,n)?t:e}function ua(e,t,n,i,r,a){return rl(e)&&rl(t)&&(a.set(t,e),Vi(e,t,ne,ua,a),a.delete(t)),e}function pa(e){return fl(e)?ne:e}function ca(e,t,n,i,r,a){var o=n&fe,d=e.length,l=t.length;if(d!=l&&!(o&&l>d))return!1;var s=a.get(e);if(s&&a.get(t))return s==t;var u=-1,p=!0,c=n&_e?new gn:ne;for(a.set(e,t),a.set(t,e);++u<d;){var f=e[u],_=t[u];if(i)var h=o?i(_,f,u,t,e,a):i(f,_,u,e,t,a);if(h!==ne){if(h)continue;p=!1;break}if(c){if(!g(t,function(e,t){if(!R(c,t)&&(f===e||r(f,e,n,i,a)))return c.push(t)})){p=!1;break}}else if(f!==_&&!r(f,_,n,i,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function fa(e,t,n,i,r,a,o){switch(n){case st:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case lt:return!(e.byteLength!=t.byteLength||!a(new Iu(e),new Iu(t)));case Me:case $e:case He:return Vd(+e,+t);case Ke:return e.name==t.name&&e.message==t.message;case tt:case it:return e==t+"";case Je:var d=M;case nt:var l=i&fe;if(d||(d=G),e.size!=t.size&&!l)return!1;var s=o.get(e);if(s)return s==t;i|=_e,o.set(e,t);var u=ca(d(e),d(t),i,r,a,o);return o.delete(e),u;case rt:if(pp)return pp.call(e)==pp.call(t)}return!1}function _a(e,t,n,i,r,a){var o=n&fe,d=ga(e),l=d.length;if(l!=ga(t).length&&!o)return!1;for(var p=l;p--;){var c=d[p];if(!(o?c in t:gu.call(t,c)))return!1}var f=a.get(e);if(f&&a.get(t))return f==t;var _=!0;a.set(e,t),a.set(t,e);for(var h=o;++p<l;){c=d[p];var g=e[c],y=t[c];if(i)var m=o?i(y,g,c,t,e,a):i(g,y,c,e,t,a);if(!(m===ne?g===y||r(g,y,n,i,a):m)){_=!1;break}h||(h="constructor"==c)}if(_&&!h){var x=e.constructor,b=t.constructor;x!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b)&&(_=!1)}return a.delete(e),a.delete(t),_}function ha(e){return Ep(Ka(e,ne,fo),e+"")}function ga(e){return li(e,Pl,vp)}function ya(e){return li(e,ql,Ip)}function ma(e){for(var t=e.name+"",n=rp[t],i=gu.call(rp,t)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==e)return r.name}return t}function xa(e){return(gu.call(n,"placeholder")?n:e).placeholder}function ba(){var e=n.iteratee||Ls;return e=e===Ls?Ui:e,arguments.length?e(arguments[0],arguments[1]):e}function ka(e,t){var n=e.__data__;return Wa(t)?n["string"==typeof t?"string":"hash"]:n.map}function ja(e){for(var t=Pl(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,Pa(r)]}return t}function Ta(e,t){var n=B(e,t);return Ri(n)?n:ne}function va(e){var t=gu.call(e,Nu),n=e[Nu];try{e[Nu]=ne;var i=!0}catch(t){}var r=xu.call(e);return i&&(t?e[Nu]=n:delete e[Nu]),r}function Ia(e,t,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Ku(t,e+o);break;case"takeRight":e=Vu(e,t-o)}}return{start:e,end:t}}function Oa(e){var t=e.match(Ut);return t?t[1].split(Bt):[]}function wa(e,t,n){t=vr(t,e);for(var i=-1,r=t.length,a=!1;++i<r;){var o=Qa(t[i]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++i!=r?a:!!(r=null==e?0:e.length)&&il(r)&&Na(o,r)&&(gc(e)||hc(e))}function Aa(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&gu.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Sa(e){return"function"!=typeof e.constructor||Ba(e)?{}:fp(wu(e))}function Ea(e,t,n){var i=e.constructor;switch(t){case lt:return wr(e);case Me:case $e:return new i(+e);case st:return Ar(e,n);case ut:case pt:case ct:case ft:case _t:case ht:case gt:case yt:case mt:return Lr(e,n);case Je:return new i;case He:case it:return new i(e);case tt:return Sr(e);case nt:return new i;case rt:return Er(e)}}function La(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(Dt,"{\n/* [wrapped with "+t+"] */\n")}function za(e){return gc(e)||hc(e)||!!(Lu&&e&&e[Lu])}function Na(e,t){var n=void 0===e?"undefined":_typeof(e);return!!(t=null==t?Ne:t)&&("number"==n||"symbol"!=n&&Zt.test(e))&&e>-1&&e%1==0&&e<t}function Ra(e,t,n){if(!rl(n))return!1;var i=void 0===t?"undefined":_typeof(t);return!!("number"==i?Kd(n)&&Na(t,n.length):"string"==i&&t in n)&&Vd(n[t],e)}function Ca(e,t){if(gc(e))return!1;var n=void 0===e?"undefined":_typeof(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!gl(e))||(Et.test(e)||!St.test(e)||null!=t&&e in du(t))}function Wa(e){var t=void 0===e?"undefined":_typeof(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Da(e){var t=ma(e),i=n[t];if("function"!=typeof i||!(t in O.prototype))return!1;if(e===i)return!0;var r=Tp(i);return!!r&&e===r[0]}function Ua(e){return!!mu&&mu in e}function Ba(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||fu)}function Pa(e){return e===e&&!rl(e)}function qa(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==ne||e in du(n)))}}function Ma(e,t){var n=e[1],i=t[1],r=n|i,a=r<(he|ge|je),o=i==je&&n==me||i==je&&n==Te&&e[7].length<=t[8]||i==(je|Te)&&t[7].length<=t[8]&&n==me;if(!a&&!o)return e;i&he&&(e[2]=t[2],r|=n&he?0:ye);var d=t[3];if(d){var l=e[3];e[3]=l?Rr(l,d,t[4]):d,e[4]=l?V(e[3],se):t[4]}return d=t[5],d&&(l=e[5],e[5]=l?Cr(l,d,t[6]):d,e[6]=l?V(e[5],se):t[6]),d=t[7],d&&(e[7]=d),i&je&&(e[8]=null==e[8]?t[8]:Ku(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}function $a(e){var t=[];if(null!=e)for(var n in du(e))t.push(n);return t}function Va(e){return xu.call(e)}function Ka(e,t,n){return t=Vu(t===ne?e.length-1:t,0),function(){for(var r=arguments,a=-1,o=Vu(r.length-t,0),d=nu(o);++a<o;)d[a]=r[t+a];a=-1;for(var l=nu(t+1);++a<t;)l[a]=r[a];return l[t]=n(d),i(e,this,l)}}function Ga(e,t){return t.length<2?e:oi(e,lr(t,0,-1))}function Za(e,t){for(var n=e.length,i=Ku(t.length,n),r=Wr(e);i--;){var a=t[i];e[i]=Na(a,n)?r[a]:ne}return e}function Ja(e,t,n){var i=t+"";return Ep(e,La(i,eo(Oa(i),n)))}function Ha(e){var t=0,n=0;return function(){var i=Gu(),r=Ae-(i-n);if(n=i,r>0){if(++t>=we)return arguments[0]}else t=0;return e.apply(ne,arguments)}}function Ya(e,t){var n=-1,i=e.length,r=i-1;for(t=t===ne?i:t;++n<t;){var a=er(n,r),o=e[a];e[a]=e[n],e[n]=o}return e.length=t,e}function Qa(e){if("string"==typeof e||gl(e))return e;var t=e+"";return"0"==t&&1/e==-ze?"-0":t}function Xa(e){if(null!=e){try{return hu.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function eo(e,t){return a(Be,function(n){var i="_."+n[0];t&n[1]&&!s(e,i)&&e.push(i)}),e.sort()}function to(e){if(e instanceof O)return e.clone();var t=new y(e.__wrapped__,e.__chain__);return t.__actions__=Wr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function no(e,t,n){t=(n?Ra(e,t,n):t===ne)?1:Vu(jl(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var r=0,a=0,o=nu(Uu(i/t));r<i;)o[a++]=lr(e,r,r+=t);return o}function io(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var a=e[t];a&&(r[i++]=a)}return r}function ro(){var e=arguments.length;if(!e)return[];for(var t=nu(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return c(gc(n)?Wr(n):[n],Xn(t,1))}function ao(e,t,i){var r=null==e?0:e.length;return r?(t=i||t===ne?1:jl(t),lr(e,t<0?0:t,r)):[]}function oo(e,t,i){var r=null==e?0:e.length;return r?(t=i||t===ne?1:jl(t),t=r-t,lr(e,0,t<0?0:t)):[]}function lo(e,t){return e&&e.length?mr(e,ba(t,3),!0,!0):[]}function so(e,t){return e&&e.length?mr(e,ba(t,3),!0):[]}function uo(e,t,n,i){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Ra(e,t,n)&&(n=0,i=r),Yn(e,t,n,i)):[]}function po(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:jl(n);return r<0&&(r=Vu(i+r,0)),b(e,ba(t,3),r)}function co(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return n!==ne&&(r=jl(n),r=n<0?Vu(i+r,0):Ku(r,i-1)),b(e,ba(t,3),r,!0)}function fo(e){return(null==e?0:e.length)?Xn(e,1):[]}function _o(e){return(null==e?0:e.length)?Xn(e,ze):[]}function ho(e,t){return(null==e?0:e.length)?(t=t===ne?1:jl(t),Xn(e,t)):[]}function go(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i}function yo(e){return e&&e.length?e[0]:ne}function mo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:jl(n);return r<0&&(r=Vu(i+r,0)),k(e,t,r)}function xo(e){return(null==e?0:e.length)?lr(e,0,-1):[]}function bo(e,t){return null==e?"":Mu.call(e,t)}function ko(e){var t=null==e?0:e.length;return t?e[t-1]:ne}function jo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;return n!==ne&&(r=jl(n),r=r<0?Vu(i+r,0):Ku(r,i-1)),t===t?H(e,t,r):b(e,T,r,!0)}function To(e,t){return e&&e.length?Gi(e,jl(t)):ne}function vo(e,t){return e&&e.length&&t&&t.length?Qi(e,t):e}function Io(e,t,n){return e&&e.length&&t&&t.length?Qi(e,t,ba(n,2)):e}function Oo(e,t,n){return e&&e.length&&t&&t.length?Qi(e,t,ne,n):e}function wo(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],a=e.length;for(t=ba(t,3);++i<a;){var o=e[i];t(o,i,e)&&(n.push(o),r.push(i))}return Xi(e,r),n}function Ao(e){return null==e?e:Hu.call(e)}function So(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Ra(e,t,n)?(t=0,n=i):(t=null==t?0:jl(t),n=n===ne?i:jl(n)),lr(e,t,n)):[]}function Eo(e,t){return ur(e,t)}function Lo(e,t,n){return pr(e,t,ba(n,2))}function zo(e,t){var n=null==e?0:e.length;if(n){var i=ur(e,t);if(i<n&&Vd(e[i],t))return i}return-1}function No(e,t){return ur(e,t,!0)}function Ro(e,t,n){return pr(e,t,ba(n,2),!0)}function Co(e,t){if(null==e?0:e.length){var i=ur(e,t,!0)-1;if(Vd(e[i],t))return i}return-1}function Wo(e){return e&&e.length?cr(e):[]}function Do(e,t){return e&&e.length?cr(e,ba(t,2)):[]}function Uo(e){var t=null==e?0:e.length;return t?lr(e,1,t):[]}function Bo(e,t,i){return e&&e.length?(t=i||t===ne?1:jl(t),lr(e,0,t<0?0:t)):[]}function Po(e,t,i){var r=null==e?0:e.length;return r?(t=i||t===ne?1:jl(t),t=r-t,lr(e,t<0?0:t,r)):[]}function qo(e,t){return e&&e.length?mr(e,ba(t,3),!1,!0):[]}function Fo(e,t){return e&&e.length?mr(e,ba(t,3)):[]}function Mo(e){return e&&e.length?hr(e):[]}function $o(e,t){return e&&e.length?hr(e,ba(t,2)):[]}function Vo(e,t){return t="function"==typeof t?t:ne,e&&e.length?hr(e,ne,t):[]}function Ko(e){if(!e||!e.length)return[];var t=0;return e=l(e,function(e){if(Gd(e))return t=Vu(e.length,t),!0}),E(t,function(t){return p(e,I(t))})}function Go(e,t){if(!e||!e.length)return[];var n=Ko(e);return null==t?n:p(n,function(e){return i(t,ne,e)})}function Zo(e,t){return kr(e||[],t||[],En)}function Jo(e,t){return kr(e||[],t||[],or)}function Ho(e){var t=n(e);return t.__chain__=!0,t}function Yo(e,t){return t(e),e}function Qo(e,t){return t(e)}function Xo(){return Ho(this)}function ed(){return new y(this.value(),this.__chain__)}function td(){this.__values__===ne&&(this.__values__=bl(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?ne:this.__values__[this.__index__++]}}function nd(){return this}function id(e){for(var t,n=this;n instanceof _;){var i=to(n);i.__index__=0,i.__values__=ne,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t}function rd(){var e=this.__wrapped__;if(e instanceof O){var t=e;return this.__actions__.length&&(t=new O(this)),t=t.reverse(),t.__actions__.push({func:Qo,args:[Ao],thisArg:ne}),new y(t,this.__chain__)}return this.thru(Ao)}function ad(){return xr(this.__wrapped__,this.__actions__)}function od(e,t,n){var i=gc(e)?d:Vn;return n&&Ra(e,t,n)&&(t=ne),i(e,ba(t,3))}function dd(e,t){return(gc(e)?l:Qn)(e,ba(t,3))}function ld(e,t){return Xn(_d(e,t),1)}function sd(e,t){return Xn(_d(e,t),ze)}function ud(e,t,n){return n=n===ne?1:jl(n),Xn(_d(e,t),n)}function pd(e,t){return(gc(e)?a:_p)(e,ba(t,3))}function cd(e,t){return(gc(e)?o:hp)(e,ba(t,3))}function fd(e,t,n,i){e=Kd(e)?e:Xl(e),n=n&&!i?jl(n):0;var r=e.length;return n<0&&(n=Vu(r+n,0)),hl(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&k(e,t,n)>-1}function _d(e,t){return(gc(e)?p:Fi)(e,ba(t,3))}function hd(e,t,n,i){return null==e?[]:(gc(t)||(t=null==t?[]:[t]),n=i?ne:n,gc(n)||(n=null==n?[]:[n]),Zi(e,t,n))}function gd(e,t,n){var i=gc(e)?f:w,r=arguments.length<3;return i(e,ba(t,4),n,r,_p)}function yd(e,t,n){var i=gc(e)?h:w,r=arguments.length<3;return i(e,ba(t,4),n,r,hp)}function md(e,t){return(gc(e)?l:Qn)(e,zd(ba(t,3)))}function xd(e){return(gc(e)?On:rr)(e)}function bd(e,t,i){return t=(i?Ra(e,t,i):t===ne)?1:jl(t),(gc(e)?wn:ar)(e,t)}function kd(e){return(gc(e)?An:dr)(e)}function jd(e){if(null==e)return 0;if(Kd(e))return hl(e)?Y(e):e.length;var t=Op(e);return t==Je||t==nt?e.size:Bi(e).length}function Td(e,t,n){var i=gc(e)?g:sr;return n&&Ra(e,t,n)&&(t=ne),i(e,ba(t,3))}function vd(e,t){if("function"!=typeof t)throw new uu(oe);return e=jl(e),function(){if(--e<1)return t.apply(this,arguments)}}function Id(e,t,i){return t=i?ne:t,t=e&&null==t?e.length:t,la(e,je,ne,ne,ne,ne,t)}function Od(e,t){var i;if("function"!=typeof t)throw new uu(oe);return e=jl(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=ne),i}}function wd(e,t,n){t=n?ne:t;var i=la(e,me,ne,ne,ne,ne,ne,t);return i.placeholder=wd.placeholder,i}function Ad(e,t,n){t=n?ne:t;var i=la(e,xe,ne,ne,ne,ne,ne,t);return i.placeholder=Ad.placeholder,i}function Sd(e,t,n){function i(t){var n=c,i=f;return c=f=ne,m=t,h=e.apply(i,n)}function r(e){return m=e,g=Sp(d,t),x?i(e):h}function a(e){var n=e-y,i=e-m,r=t-n;return b?Ku(r,_-i):r}function o(e){var n=e-y,i=e-m;return y===ne||n>=t||n<0||b&&i>=_}function d(){var e=rc();if(o(e))return l(e);g=Sp(d,a(e))}function l(e){return g=ne,k&&c?i(e):(c=f=ne,h)}function s(){g!==ne&&kp(g),m=0,c=y=f=g=ne}function u(){return g===ne?h:l(rc())}function p(){var e=rc(),n=o(e);if(c=arguments,f=this,y=e,n){if(g===ne)return r(y);if(b)return g=Sp(d,t),i(y)}return g===ne&&(g=Sp(d,t)),h}var c,f,_,h,g,y,m=0,x=!1,b=!1,k=!0;if("function"!=typeof e)throw new uu(oe);return t=vl(t)||0,rl(n)&&(x=!!n.leading,b="maxWait"in n,_=b?Vu(vl(n.maxWait)||0,t):_,k="trailing"in n?!!n.trailing:k),p.cancel=s,p.flush=u,p}function Ed(e){return la(e,ve)}function Ld(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new uu(oe);return n.cache=new(Ld.Cache||un),n}function zd(e){if("function"!=typeof e)throw new uu(oe);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Nd(e){return Od(2,e)}function Rd(e,t){if("function"!=typeof e)throw new uu(oe);return t=t===ne?t:jl(t),ir(e,t)}function Cd(e,t){if("function"!=typeof e)throw new uu(oe);return t=null==t?0:Vu(jl(t),0),ir(function(n){var r=n[t],a=Ir(n,0,t);return r&&c(a,r),i(e,this,a)})}function Wd(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new uu(oe);return rl(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Sd(e,t,{leading:i,maxWait:t,trailing:r})}function Dd(e){return Id(e,1)}function Ud(e,t){return uc(Tr(t),e)}function Bd(){if(!arguments.length)return[];var e=arguments[0];return gc(e)?e:[e]}function Pd(e){return Un(e,ce)}function qd(e,t){return t="function"==typeof t?t:ne,Un(e,ce,t)}function Fd(e){return Un(e,ue|ce)}function Md(e,t){return t="function"==typeof t?t:ne,Un(e,ue|ce,t)}function $d(e,t){return null==t||Fn(e,t,Pl(t))}function Vd(e,t){return e===t||e!==e&&t!==t}function Kd(e){return null!=e&&il(e.length)&&!tl(e)}function Gd(e){return al(e)&&Kd(e)}function Zd(e){return!0===e||!1===e||al(e)&&si(e)==Me}function Jd(e){return al(e)&&1===e.nodeType&&!fl(e)}function Hd(e){if(null==e)return!0;if(Kd(e)&&(gc(e)||"string"==typeof e||"function"==typeof e.splice||mc(e)||Tc(e)||hc(e)))return!e.length;var t=Op(e);if(t==Je||t==nt)return!e.size;if(Ba(e))return!Bi(e).length;for(var n in e)if(gu.call(e,n))return!1;return!0}function Yd(e,t){return Ei(e,t)}function Qd(e,t,n){n="function"==typeof n?n:ne;var i=n?n(e,t):ne;return i===ne?Ei(e,t,ne,n):!!i}function Xd(e){if(!al(e))return!1;var t=si(e);return t==Ke||t==Ve||"string"==typeof e.message&&"string"==typeof e.name&&!fl(e)}function el(e){return"number"==typeof e&&Fu(e)}function tl(e){if(!rl(e))return!1;var t=si(e);return t==Ge||t==Ze||t==Fe||t==et}function nl(e){return"number"==typeof e&&e==jl(e)}function il(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Ne}function rl(e){var t=void 0===e?"undefined":_typeof(e);return null!=e&&("object"==t||"function"==t)}function al(e){return null!=e&&"object"==(void 0===e?"undefined":_typeof(e))}function ol(e,t){return e===t||Ni(e,t,ja(t))}function dl(e,t,n){return n="function"==typeof n?n:ne,Ni(e,t,ja(t),n)}function ll(e){return cl(e)&&e!=+e}function sl(e){if(wp(e))throw new ru(ae);return Ri(e)}function ul(e){return null===e}function pl(e){return null==e}function cl(e){return"number"==typeof e||al(e)&&si(e)==He}function fl(e){if(!al(e)||si(e)!=Qe)return!1;var t=wu(e);if(null===t)return!0;var n=gu.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&hu.call(n)==bu}function _l(e){return nl(e)&&e>=-Ne&&e<=Ne}function hl(e){return"string"==typeof e||!gc(e)&&al(e)&&si(e)==it}function gl(e){return"symbol"==(void 0===e?"undefined":_typeof(e))||al(e)&&si(e)==rt}function yl(e){return e===ne}function ml(e){return al(e)&&Op(e)==ot}function xl(e){return al(e)&&si(e)==dt}function bl(e){if(!e)return[];if(Kd(e))return hl(e)?Q(e):Wr(e);if(zu&&e[zu])return F(e[zu]());var t=Op(e);return(t==Je?M:t==nt?G:Xl)(e)}function kl(e){if(!e)return 0===e?e:0;if((e=vl(e))===ze||e===-ze){return(e<0?-1:1)*Re}return e===e?e:0}function jl(e){var t=kl(e),n=t%1;return t===t?n?t-n:t:0}function Tl(e){return e?Dn(jl(e),0,We):0}function vl(e){if("number"==typeof e)return e;if(gl(e))return Ce;if(rl(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=rl(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Rt,"");var n=Vt.test(e);return n||Gt.test(e)?ti(e.slice(2),n?2:8):$t.test(e)?Ce:+e}function Il(e){return Dr(e,ql(e))}function Ol(e){return e?Dn(jl(e),-Ne,Ne):0===e?e:0}function wl(e){return null==e?"":_r(e)}function Al(e,t){var n=fp(e);return null==t?n:Nn(n,t)}function Sl(e,t){return x(e,ba(t,3),ni)}function El(e,t){return x(e,ba(t,3),ii)}function Ll(e,t){return null==e?e:gp(e,ba(t,3),ql)}function zl(e,t){return null==e?e:yp(e,ba(t,3),ql)}function Nl(e,t){return e&&ni(e,ba(t,3))}function Rl(e,t){return e&&ii(e,ba(t,3))}function Cl(e){return null==e?[]:ai(e,Pl(e))}function Wl(e){return null==e?[]:ai(e,ql(e))}function Dl(e,t,n){var i=null==e?ne:oi(e,t);return i===ne?n:i}function Ul(e,t){return null!=e&&wa(e,t,bi)}function Bl(e,t){return null!=e&&wa(e,t,ji)}function Pl(e){return Kd(e)?In(e):Bi(e)}function ql(e){return Kd(e)?In(e,!0):Pi(e)}function Fl(e,t){var n={};return t=ba(t,3),ni(e,function(e,i,r){Cn(n,t(e,i,r),e)}),n}function Ml(e,t){var n={};return t=ba(t,3),ni(e,function(e,i,r){Cn(n,i,t(e,i,r))}),n}function $l(e,t){return Vl(e,zd(ba(t)))}function Vl(e,t){if(null==e)return{};var n=p(ya(e),function(e){return[e]});return t=ba(t),Hi(e,n,function(e,n){return t(e,n[0])})}function Kl(e,t,n){t=vr(t,e);var i=-1,r=t.length;for(r||(r=1,e=ne);++i<r;){var a=null==e?ne:e[Qa(t[i])];a===ne&&(i=r,a=n),e=tl(a)?a.call(e):a}return e}function Gl(e,t,n){return null==e?e:or(e,t,n)}function Zl(e,t,n,i){return i="function"==typeof i?i:ne,null==e?e:or(e,t,n,i)}function Jl(e,t,n){var i=gc(e),r=i||mc(e)||Tc(e);if(t=ba(t,4),null==n){var o=e&&e.constructor;n=r?i?new o:[]:rl(e)&&tl(o)?fp(wu(e)):{}}return(r?a:ni)(e,function(e,i,r){return t(n,e,i,r)}),n}function Hl(e,t){return null==e||gr(e,t)}function Yl(e,t,n){return null==e?e:yr(e,t,Tr(n))}function Ql(e,t,n,i){return i="function"==typeof i?i:ne,null==e?e:yr(e,t,Tr(n),i)}function Xl(e){return null==e?[]:N(e,Pl(e))}function es(e){return null==e?[]:N(e,ql(e))}function ts(e,t,n){return n===ne&&(n=t,t=ne),n!==ne&&(n=vl(n),n=n===n?n:0),t!==ne&&(t=vl(t),t=t===t?t:0),Dn(vl(e),t,n)}function ns(e,t,n){return t=kl(t),n===ne?(n=t,t=0):n=kl(n),e=vl(e),Ti(e,t,n)}function is(e,t,n){if(n&&"boolean"!=typeof n&&Ra(e,t,n)&&(t=n=ne),n===ne&&("boolean"==typeof t?(n=t,t=ne):"boolean"==typeof e&&(n=e,e=ne)),e===ne&&t===ne?(e=0,t=1):(e=kl(e),t===ne?(t=e,e=0):t=kl(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=Ju();return Ku(e+r*(t-e+ei("1e-"+((r+"").length-1))),t)}return er(e,t)}function rs(e){return Jc(wl(e).toLowerCase())}function as(e){return(e=wl(e))&&e.replace(Jt,yi).replace(qn,"")}function os(e,t,n){e=wl(e),t=_r(t);var i=e.length;n=n===ne?i:Dn(jl(n),0,i);var r=n;return(n-=t.length)>=0&&e.slice(n,r)==t}function ds(e){return e=wl(e),e&&It.test(e)?e.replace(Tt,mi):e}function ls(e){return e=wl(e),e&&Nt.test(e)?e.replace(zt,"\\$&"):e}function ss(e,t,n){e=wl(e),t=jl(t);var i=t?Y(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return ta(Bu(r),n)+e+ta(Uu(r),n)}function us(e,t,n){e=wl(e),t=jl(t);var i=t?Y(e):0;return t&&i<t?e+ta(t-i,n):e}function ps(e,t,n){e=wl(e),t=jl(t);var i=t?Y(e):0;return t&&i<t?ta(t-i,n)+e:e}function cs(e,t,n){return n||null==t?t=0:t&&(t=+t),Zu(wl(e).replace(Ct,""),t||0)}function fs(e,t,i){return t=(i?Ra(e,t,i):t===ne)?1:jl(t),nr(wl(e),t)}function _s(){var e=arguments,t=wl(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function hs(e,t,n){return n&&"number"!=typeof n&&Ra(e,t,n)&&(t=n=ne),(n=n===ne?We:n>>>0)?(e=wl(e),e&&("string"==typeof t||null!=t&&!kc(t))&&!(t=_r(t))&&P(e)?Ir(Q(e),0,n):e.split(t,n)):[]}function gs(e,t,n){return e=wl(e),n=null==n?0:Dn(jl(n),0,e.length),t=_r(t),e.slice(n,n+t.length)==t}function ys(e,t,i){var r=n.templateSettings;i&&Ra(e,t,i)&&(t=ne),e=wl(e),t=Ac({},t,r,sa);var l,s,a=Ac({},t.imports,r.imports,sa),o=Pl(a),d=N(a,o),u=0,p=t.interpolate||Ht,c="__p += '",f=lu((t.escape||Ht).source+"|"+p.source+"|"+(p===At?Ft:Ht).source+"|"+(t.evaluate||Ht).source+"|$","g"),_="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Gn+"]")+"\n";e.replace(f,function(t,n,i,r,a,o){return i||(i=r),c+=e.slice(u,o).replace(Yt,U),n&&(l=!0,c+="' +\n__e("+n+") +\n'"),a&&(s=!0,c+="';\n"+a+";\n__p += '"),i&&(c+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),u=o+t.length,t}),c+="';\n";var h=t.variable;h||(c="with (obj) {\n"+c+"\n}\n"),c=(s?c.replace(xt,""):c).replace(bt,"$1").replace(kt,"$1;"), c="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(l?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var g=Hc(function(){return au(o,_+"return "+c).apply(ne,d)});if(g.source=c,Xd(g))throw g;return g}function ms(e){return wl(e).toLowerCase()}function xs(e){return wl(e).toUpperCase()}function bs(e,t,n){if((e=wl(e))&&(n||t===ne))return e.replace(Rt,"");if(!e||!(t=_r(t)))return e;var i=Q(e),r=Q(t);return Ir(i,C(i,r),W(i,r)+1).join("")}function ks(e,t,n){if((e=wl(e))&&(n||t===ne))return e.replace(Wt,"");if(!e||!(t=_r(t)))return e;var i=Q(e);return Ir(i,0,W(i,Q(t))+1).join("")}function js(e,t,n){if((e=wl(e))&&(n||t===ne))return e.replace(Ct,"");if(!e||!(t=_r(t)))return e;var i=Q(e);return Ir(i,C(i,Q(t))).join("")}function Ts(e,t){var n=Ie,i=Oe;if(rl(t)){var r="separator"in t?t.separator:r;n="length"in t?jl(t.length):n,i="omission"in t?_r(t.omission):i}e=wl(e);var a=e.length;if(P(e)){var o=Q(e);a=o.length}if(n>=a)return e;var d=n-Y(i);if(d<1)return i;var l=o?Ir(o,0,d).join(""):e.slice(0,d);if(r===ne)return l+i;if(o&&(d+=l.length-d),kc(r)){if(e.slice(d).search(r)){var s,u=l;for(r.global||(r=lu(r.source,wl(Mt.exec(r))+"g")),r.lastIndex=0;s=r.exec(u);)var p=s.index;l=l.slice(0,p===ne?d:p)}}else if(e.indexOf(_r(r),d)!=d){var c=l.lastIndexOf(r);c>-1&&(l=l.slice(0,c))}return l+i}function vs(e){return e=wl(e),e&&vt.test(e)?e.replace(jt,xi):e}function Is(e,t,n){return e=wl(e),t=n?ne:t,t===ne?q(e)?te(e):m(e):e.match(t)||[]}function Os(e){var t=null==e?0:e.length,n=ba();return e=t?p(e,function(e){if("function"!=typeof e[1])throw new uu(oe);return[n(e[0]),e[1]]}):[],ir(function(n){for(var r=-1;++r<t;){var a=e[r];if(i(a[0],this,n))return i(a[1],this,n)}})}function ws(e){return Bn(Un(e,ue))}function As(e){return function(){return e}}function Ss(e,t){return null==e||e!==e?t:e}function Es(e){return e}function Ls(e){return Ui("function"==typeof e?e:Un(e,ue))}function zs(e){return Mi(Un(e,ue))}function Ns(e,t){return $i(e,Un(t,ue))}function Rs(e,t,n){var i=Pl(t),r=ai(t,i);null!=n||rl(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=ai(t,Pl(t)));var o=!(rl(n)&&"chain"in n&&!n.chain),d=tl(e);return a(r,function(n){var i=t[n];e[n]=i,d&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Wr(this.__actions__)).push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,c([this.value()],arguments))})}),e}function Cs(){return ri._===this&&(ri._=ku),this}function Ws(){}function Ds(e){return e=jl(e),ir(function(t){return Gi(t,e)})}function Us(e){return Ca(e)?I(Qa(e)):Yi(e)}function Bs(e){return function(t){return null==e?ne:oi(e,t)}}function Ps(){return[]}function qs(){return!1}function Fs(){return{}}function Ms(){return""}function $s(){return!0}function Vs(e,t){if((e=jl(e))<1||e>Ne)return[];var i=We,r=Ku(e,We);t=ba(t),e-=We;for(var a=E(r,t);++i<e;)t(i);return a}function Ks(e){return gc(e)?p(e,Qa):gl(e)?[e]:Wr(Lp(wl(e)))}function Gs(e){var t=++yu;return wl(e)+t}function Zs(e){return e&&e.length?Hn(e,Es,gi):ne}function Js(e,t){return e&&e.length?Hn(e,ba(t,2),gi):ne}function Hs(e){return v(e,Es)}function Ys(e,t){return v(e,ba(t,2))}function Qs(e){return e&&e.length?Hn(e,Es,qi):ne}function Xs(e,t){return e&&e.length?Hn(e,ba(t,2),qi):ne}function eu(e){return e&&e.length?S(e,Es):0}function tu(e,t){return e&&e.length?S(e,ba(t,2)):0}t=null==t?ri:ki.defaults(ri.Object(),t,ki.pick(ri,Kn));var nu=t.Array,iu=t.Date,ru=t.Error,au=t.Function,ou=t.Math,du=t.Object,lu=t.RegExp,su=t.String,uu=t.TypeError,pu=nu.prototype,cu=au.prototype,fu=du.prototype,_u=t["__core-js_shared__"],hu=cu.toString,gu=fu.hasOwnProperty,yu=0,mu=function(){var e=/[^.]+$/.exec(_u&&_u.keys&&_u.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),xu=fu.toString,bu=hu.call(du),ku=ri._,ju=lu("^"+hu.call(gu).replace(zt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tu=di?t.Buffer:ne,vu=t.Symbol,Iu=t.Uint8Array,Ou=Tu?Tu.allocUnsafe:ne,wu=$(du.getPrototypeOf,du),Au=du.create,Su=fu.propertyIsEnumerable,Eu=pu.splice,Lu=vu?vu.isConcatSpreadable:ne,zu=vu?vu.iterator:ne,Nu=vu?vu.toStringTag:ne,Ru=function(){try{var e=Ta(du,"defineProperty");return e({},"",{}),e}catch(t){}}(),Cu=t.clearTimeout!==ri.clearTimeout&&t.clearTimeout,Wu=iu&&iu.now!==ri.Date.now&&iu.now,Du=t.setTimeout!==ri.setTimeout&&t.setTimeout,Uu=ou.ceil,Bu=ou.floor,Pu=du.getOwnPropertySymbols,qu=Tu?Tu.isBuffer:ne,Fu=t.isFinite,Mu=pu.join,$u=$(du.keys,du),Vu=ou.max,Ku=ou.min,Gu=iu.now,Zu=t.parseInt,Ju=ou.random,Hu=pu.reverse,Yu=Ta(t,"DataView"),Qu=Ta(t,"Map"),Xu=Ta(t,"Promise"),ep=Ta(t,"Set"),tp=Ta(t,"WeakMap"),np=Ta(du,"create"),ip=tp&&new tp,rp={},ap=Xa(Yu),op=Xa(Qu),dp=Xa(Xu),lp=Xa(ep),sp=Xa(tp),up=vu?vu.prototype:ne,pp=up?up.valueOf:ne,cp=up?up.toString:ne,fp=function(){function e(){}return function(t){if(!rl(t))return{};if(Au)return Au(t);e.prototype=t;var n=new e;return e.prototype=ne,n}}();n.templateSettings={escape:Ot,evaluate:wt,interpolate:At,variable:"",imports:{_:n}},n.prototype=_.prototype,n.prototype.constructor=n,y.prototype=fp(_.prototype),y.prototype.constructor=y,O.prototype=fp(_.prototype),O.prototype.constructor=O,Pt.prototype.clear=Qt,Pt.prototype.delete=Xt,Pt.prototype.get=en,Pt.prototype.has=tn,Pt.prototype.set=nn,rn.prototype.clear=an,rn.prototype.delete=on,rn.prototype.get=dn,rn.prototype.has=ln,rn.prototype.set=sn,un.prototype.clear=pn,un.prototype.delete=cn,un.prototype.get=fn,un.prototype.has=_n,un.prototype.set=hn,gn.prototype.add=gn.prototype.push=yn,gn.prototype.has=mn,xn.prototype.clear=bn,xn.prototype.delete=kn,xn.prototype.get=jn,xn.prototype.has=Tn,xn.prototype.set=vn;var _p=Fr(ni),hp=Fr(ii,!0),gp=Mr(),yp=Mr(!0),mp=ip?function(e,t){return ip.set(e,t),e}:Es,xp=Ru?function(e,t){return Ru(e,"toString",{configurable:!0,enumerable:!1,value:As(t),writable:!0})}:Es,bp=ir,kp=Cu||function(e){return ri.clearTimeout(e)},jp=ep&&1/G(new ep([,-0]))[1]==ze?function(e){return new ep(e)}:Ws,Tp=ip?function(e){return ip.get(e)}:Ws,vp=Pu?function(e){return null==e?[]:(e=du(e),l(Pu(e),function(t){return Su.call(e,t)}))}:Ps,Ip=Pu?function(e){for(var t=[];e;)c(t,vp(e)),e=wu(e);return t}:Ps,Op=si;(Yu&&Op(new Yu(new ArrayBuffer(1)))!=st||Qu&&Op(new Qu)!=Je||Xu&&Op(Xu.resolve())!=Xe||ep&&Op(new ep)!=nt||tp&&Op(new tp)!=ot)&&(Op=function(e){var t=si(e),n=t==Qe?e.constructor:ne,i=n?Xa(n):"";if(i)switch(i){case ap:return st;case op:return Je;case dp:return Xe;case lp:return nt;case sp:return ot}return t});var wp=_u?tl:qs,Ap=Ha(mp),Sp=Du||function(e,t){return ri.setTimeout(e,t)},Ep=Ha(xp),Lp=function(e){var t=Ld(e,function(e){return n.size===le&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Lt,function(e,n,i,r){t.push(i?r.replace(qt,"$1"):n||e)}),t}),zp=ir(function(e,t){return Gd(e)?$n(e,Xn(t,1,Gd,!0)):[]}),Np=ir(function(e,t){var n=ko(t);return Gd(n)&&(n=ne),Gd(e)?$n(e,Xn(t,1,Gd,!0),ba(n,2)):[]}),Rp=ir(function(e,t){var n=ko(t);return Gd(n)&&(n=ne),Gd(e)?$n(e,Xn(t,1,Gd,!0),ne,n):[]}),Cp=ir(function(e){var t=p(e,jr);return t.length&&t[0]===e[0]?vi(t):[]}),Wp=ir(function(e){var t=ko(e),n=p(e,jr);return t===ko(n)?t=ne:n.pop(),n.length&&n[0]===e[0]?vi(n,ba(t,2)):[]}),Dp=ir(function(e){var t=ko(e),n=p(e,jr);return t="function"==typeof t?t:ne,t&&n.pop(),n.length&&n[0]===e[0]?vi(n,ne,t):[]}),Up=ir(vo),Bp=ha(function(e,t){var n=null==e?0:e.length,i=Wn(e,t);return Xi(e,p(t,function(e){return Na(e,n)?+e:e}).sort(zr)),i}),Pp=ir(function(e){return hr(Xn(e,1,Gd,!0))}),qp=ir(function(e){var t=ko(e);return Gd(t)&&(t=ne),hr(Xn(e,1,Gd,!0),ba(t,2))}),Fp=ir(function(e){var t=ko(e);return t="function"==typeof t?t:ne,hr(Xn(e,1,Gd,!0),ne,t)}),Mp=ir(function(e,t){return Gd(e)?$n(e,t):[]}),$p=ir(function(e){return br(l(e,Gd))}),Vp=ir(function(e){var t=ko(e);return Gd(t)&&(t=ne),br(l(e,Gd),ba(t,2))}),Kp=ir(function(e){var t=ko(e);return t="function"==typeof t?t:ne,br(l(e,Gd),ne,t)}),Gp=ir(Ko),Zp=ir(function(e){var t=e.length,n=t>1?e[t-1]:ne;return n="function"==typeof n?(e.pop(),n):ne,Go(e,n)}),Jp=ha(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,n=function(t){return Wn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof O&&Na(n)?(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:Qo,args:[r],thisArg:ne}),new y(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(ne),e})):this.thru(r)}),Hp=Pr(function(e,t,n){gu.call(e,n)?++e[n]:Cn(e,n,1)}),Yp=Jr(po),Qp=Jr(co),Xp=Pr(function(e,t,n){gu.call(e,n)?e[n].push(t):Cn(e,n,[t])}),ec=ir(function(e,t,n){var r=-1,a="function"==typeof t,o=Kd(e)?nu(e.length):[];return _p(e,function(e){o[++r]=a?i(t,e,n):Oi(e,t,n)}),o}),tc=Pr(function(e,t,n){Cn(e,n,t)}),nc=Pr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ic=ir(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Ra(e,t[0],t[1])?t=[]:n>2&&Ra(t[0],t[1],t[2])&&(t=[t[0]]),Zi(e,Xn(t,1),[])}),rc=Wu||function(){return ri.Date.now()},ac=ir(function(e,t,n){var i=he;if(n.length){var r=V(n,xa(ac));i|=be}return la(e,i,t,n,r)}),oc=ir(function(e,t,n){var i=he|ge;if(n.length){var r=V(n,xa(oc));i|=be}return la(t,i,e,n,r)}),dc=ir(function(e,t){return Mn(e,1,t)}),lc=ir(function(e,t,n){return Mn(e,vl(t)||0,n)});Ld.Cache=un;var sc=bp(function(e,t){t=1==t.length&&gc(t[0])?p(t[0],z(ba())):p(Xn(t,1),z(ba()));var n=t.length;return ir(function(r){for(var a=-1,o=Ku(r.length,n);++a<o;)r[a]=t[a].call(this,r[a]);return i(e,this,r)})}),uc=ir(function(e,t){var n=V(t,xa(uc));return la(e,be,ne,t,n)}),pc=ir(function(e,t){var n=V(t,xa(pc));return la(e,ke,ne,t,n)}),cc=ha(function(e,t){return la(e,Te,ne,ne,ne,t)}),fc=ra(gi),_c=ra(function(e,t){return e>=t}),hc=wi(function(){return arguments}())?wi:function(e){return al(e)&&gu.call(e,"callee")&&!Su.call(e,"callee")},gc=nu.isArray,yc=ui?z(ui):Ai,mc=qu||qs,xc=pi?z(pi):Si,bc=ci?z(ci):zi,kc=fi?z(fi):Ci,jc=_i?z(_i):Wi,Tc=hi?z(hi):Di,vc=ra(qi),Ic=ra(function(e,t){return e<=t}),Oc=qr(function(e,t){if(Ba(t)||Kd(t))return void Dr(t,Pl(t),e);for(var n in t)gu.call(t,n)&&En(e,n,t[n])}),wc=qr(function(e,t){Dr(t,ql(t),e)}),Ac=qr(function(e,t,n,i){Dr(t,ql(t),e,i)}),Sc=qr(function(e,t,n,i){Dr(t,Pl(t),e,i)}),Ec=ha(Wn),Lc=ir(function(e,t){e=du(e);var n=-1,i=t.length,r=i>2?t[2]:ne;for(r&&Ra(t[0],t[1],r)&&(i=1);++n<i;)for(var a=t[n],o=ql(a),d=-1,l=o.length;++d<l;){var s=o[d],u=e[s];(u===ne||Vd(u,fu[s])&&!gu.call(e,s))&&(e[s]=a[s])}return e}),zc=ir(function(e){return e.push(ne,ua),i(Dc,ne,e)}),Nc=Qr(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=xu.call(t)),e[t]=n},As(Es)),Rc=Qr(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=xu.call(t)),gu.call(e,t)?e[t].push(n):e[t]=[n]},ba),Cc=ir(Oi),Wc=qr(function(e,t,n){Vi(e,t,n)}),Dc=qr(function(e,t,n,i){Vi(e,t,n,i)}),Uc=ha(function(e,t){var n={};if(null==e)return n;var i=!1;t=p(t,function(t){return t=vr(t,e),i||(i=t.length>1),t}),Dr(e,ya(e),n),i&&(n=Un(n,ue|pe|ce,pa));for(var r=t.length;r--;)gr(n,t[r]);return n}),Bc=ha(function(e,t){return null==e?{}:Ji(e,t)}),Pc=da(Pl),qc=da(ql),Fc=Kr(function(e,t,n){return t=t.toLowerCase(),e+(n?rs(t):t)}),Mc=Kr(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),$c=Kr(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Vc=Vr("toLowerCase"),Kc=Kr(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Gc=Kr(function(e,t,n){return e+(n?" ":"")+Jc(t)}),Zc=Kr(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Jc=Vr("toUpperCase"),Hc=ir(function(e,t){try{return i(e,ne,t)}catch(t){return Xd(t)?t:new ru(t)}}),Yc=ha(function(e,t){return a(t,function(t){t=Qa(t),Cn(e,t,ac(e[t],e))}),e}),Qc=Hr(),Xc=Hr(!0),ef=ir(function(e,t){return function(n){return Oi(n,e,t)}}),tf=ir(function(e,t){return function(n){return Oi(e,n,t)}}),nf=ea(p),rf=ea(d),af=ea(g),of=ia(),df=ia(!0),lf=Xr(function(e,t){return e+t},0),sf=oa("ceil"),uf=Xr(function(e,t){return e/t},1),pf=oa("floor"),cf=Xr(function(e,t){return e*t},1),ff=oa("round"),_f=Xr(function(e,t){return e-t},0);return n.after=vd,n.ary=Id,n.assign=Oc,n.assignIn=wc,n.assignInWith=Ac,n.assignWith=Sc,n.at=Ec,n.before=Od,n.bind=ac,n.bindAll=Yc,n.bindKey=oc,n.castArray=Bd,n.chain=Ho,n.chunk=no,n.compact=io,n.concat=ro,n.cond=Os,n.conforms=ws,n.constant=As,n.countBy=Hp,n.create=Al,n.curry=wd,n.curryRight=Ad,n.debounce=Sd,n.defaults=Lc,n.defaultsDeep=zc,n.defer=dc,n.delay=lc,n.difference=zp,n.differenceBy=Np,n.differenceWith=Rp,n.drop=ao,n.dropRight=oo,n.dropRightWhile=lo,n.dropWhile=so,n.fill=uo,n.filter=dd,n.flatMap=ld,n.flatMapDeep=sd,n.flatMapDepth=ud,n.flatten=fo,n.flattenDeep=_o,n.flattenDepth=ho,n.flip=Ed,n.flow=Qc,n.flowRight=Xc,n.fromPairs=go,n.functions=Cl,n.functionsIn=Wl,n.groupBy=Xp,n.initial=xo,n.intersection=Cp,n.intersectionBy=Wp,n.intersectionWith=Dp,n.invert=Nc,n.invertBy=Rc,n.invokeMap=ec,n.iteratee=Ls,n.keyBy=tc,n.keys=Pl,n.keysIn=ql,n.map=_d,n.mapKeys=Fl,n.mapValues=Ml,n.matches=zs,n.matchesProperty=Ns,n.memoize=Ld,n.merge=Wc,n.mergeWith=Dc,n.method=ef,n.methodOf=tf,n.mixin=Rs,n.negate=zd,n.nthArg=Ds,n.omit=Uc,n.omitBy=$l,n.once=Nd,n.orderBy=hd,n.over=nf,n.overArgs=sc,n.overEvery=rf,n.overSome=af,n.partial=uc,n.partialRight=pc,n.partition=nc,n.pick=Bc,n.pickBy=Vl,n.property=Us,n.propertyOf=Bs,n.pull=Up,n.pullAll=vo,n.pullAllBy=Io,n.pullAllWith=Oo,n.pullAt=Bp,n.range=of,n.rangeRight=df,n.rearg=cc,n.reject=md,n.remove=wo,n.rest=Rd,n.reverse=Ao,n.sampleSize=bd,n.set=Gl,n.setWith=Zl,n.shuffle=kd,n.slice=So,n.sortBy=ic,n.sortedUniq=Wo,n.sortedUniqBy=Do,n.split=hs,n.spread=Cd,n.tail=Uo,n.take=Bo,n.takeRight=Po,n.takeRightWhile=qo,n.takeWhile=Fo,n.tap=Yo,n.throttle=Wd,n.thru=Qo,n.toArray=bl,n.toPairs=Pc,n.toPairsIn=qc,n.toPath=Ks,n.toPlainObject=Il,n.transform=Jl,n.unary=Dd,n.union=Pp,n.unionBy=qp,n.unionWith=Fp,n.uniq=Mo,n.uniqBy=$o,n.uniqWith=Vo,n.unset=Hl,n.unzip=Ko,n.unzipWith=Go,n.update=Yl,n.updateWith=Ql,n.values=Xl,n.valuesIn=es,n.without=Mp,n.words=Is,n.wrap=Ud,n.xor=$p,n.xorBy=Vp,n.xorWith=Kp,n.zip=Gp,n.zipObject=Zo,n.zipObjectDeep=Jo,n.zipWith=Zp,n.entries=Pc,n.entriesIn=qc,n.extend=wc,n.extendWith=Ac,Rs(n,n),n.add=lf,n.attempt=Hc,n.camelCase=Fc,n.capitalize=rs,n.ceil=sf,n.clamp=ts,n.clone=Pd,n.cloneDeep=Fd,n.cloneDeepWith=Md,n.cloneWith=qd,n.conformsTo=$d,n.deburr=as,n.defaultTo=Ss,n.divide=uf,n.endsWith=os,n.eq=Vd,n.escape=ds,n.escapeRegExp=ls,n.every=od,n.find=Yp,n.findIndex=po,n.findKey=Sl,n.findLast=Qp,n.findLastIndex=co,n.findLastKey=El,n.floor=pf,n.forEach=pd,n.forEachRight=cd,n.forIn=Ll,n.forInRight=zl,n.forOwn=Nl,n.forOwnRight=Rl,n.get=Dl,n.gt=fc,n.gte=_c,n.has=Ul,n.hasIn=Bl,n.head=yo,n.identity=Es,n.includes=fd,n.indexOf=mo,n.inRange=ns,n.invoke=Cc,n.isArguments=hc,n.isArray=gc,n.isArrayBuffer=yc,n.isArrayLike=Kd,n.isArrayLikeObject=Gd,n.isBoolean=Zd,n.isBuffer=mc,n.isDate=xc,n.isElement=Jd,n.isEmpty=Hd,n.isEqual=Yd,n.isEqualWith=Qd,n.isError=Xd,n.isFinite=el,n.isFunction=tl,n.isInteger=nl,n.isLength=il,n.isMap=bc,n.isMatch=ol,n.isMatchWith=dl,n.isNaN=ll,n.isNative=sl,n.isNil=pl,n.isNull=ul,n.isNumber=cl,n.isObject=rl,n.isObjectLike=al,n.isPlainObject=fl,n.isRegExp=kc,n.isSafeInteger=_l,n.isSet=jc,n.isString=hl,n.isSymbol=gl,n.isTypedArray=Tc,n.isUndefined=yl,n.isWeakMap=ml,n.isWeakSet=xl,n.join=bo,n.kebabCase=Mc,n.last=ko,n.lastIndexOf=jo,n.lowerCase=$c,n.lowerFirst=Vc,n.lt=vc,n.lte=Ic,n.max=Zs,n.maxBy=Js,n.mean=Hs,n.meanBy=Ys,n.min=Qs,n.minBy=Xs,n.stubArray=Ps,n.stubFalse=qs,n.stubObject=Fs,n.stubString=Ms,n.stubTrue=$s,n.multiply=cf,n.nth=To,n.noConflict=Cs,n.noop=Ws,n.now=rc,n.pad=ss,n.padEnd=us,n.padStart=ps,n.parseInt=cs,n.random=is,n.reduce=gd,n.reduceRight=yd,n.repeat=fs,n.replace=_s,n.result=Kl,n.round=ff,n.runInContext=e,n.sample=xd,n.size=jd,n.snakeCase=Kc,n.some=Td,n.sortedIndex=Eo,n.sortedIndexBy=Lo,n.sortedIndexOf=zo,n.sortedLastIndex=No,n.sortedLastIndexBy=Ro,n.sortedLastIndexOf=Co,n.startCase=Gc,n.startsWith=gs,n.subtract=_f,n.sum=eu,n.sumBy=tu,n.template=ys,n.times=Vs,n.toFinite=kl,n.toInteger=jl,n.toLength=Tl,n.toLower=ms,n.toNumber=vl,n.toSafeInteger=Ol,n.toString=wl,n.toUpper=xs,n.trim=bs,n.trimEnd=ks,n.trimStart=js,n.truncate=Ts,n.unescape=vs,n.uniqueId=Gs,n.upperCase=Zc,n.upperFirst=Jc,n.each=pd,n.eachRight=cd,n.first=yo,Rs(n,function(){var e={};return ni(n,function(t,i){gu.call(n.prototype,i)||(e[i]=t)}),e}(),{chain:!1}),n.VERSION="4.17.10",a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),a(["drop","take"],function(e,t){O.prototype[e]=function(i){i=i===ne?1:Vu(jl(i),0);var r=this.__filtered__&&!t?new O(this):this.clone();return r.__filtered__?r.__takeCount__=Ku(i,r.__takeCount__):r.__views__.push({size:Ku(i,We),type:e+(r.__dir__<0?"Right":"")}),r},O.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),a(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==Se||3==n;O.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ba(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),a(["head","last"],function(e,t){var n="take"+(t?"Right":"");O.prototype[e]=function(){return this[n](1).value()[0]}}),a(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");O.prototype[e]=function(){return this.__filtered__?new O(this):this[n](1)}}),O.prototype.compact=function(){return this.filter(Es)},O.prototype.find=function(e){return this.filter(e).head()},O.prototype.findLast=function(e){return this.reverse().find(e)},O.prototype.invokeMap=ir(function(e,t){return"function"==typeof e?new O(this):this.map(function(n){return Oi(n,e,t)})}),O.prototype.reject=function(e){return this.filter(zd(ba(e)))},O.prototype.slice=function(e,t){e=jl(e);var n=this;return n.__filtered__&&(e>0||t<0)?new O(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==ne&&(t=jl(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},O.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},O.prototype.toArray=function(){return this.take(We)},ni(O.prototype,function(e,t){var r=(/^(?:filter|find|map|reject)|While$/.test(t),/^(?:head|last)$/.test(t)),a=n[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);a&&(n.prototype[t]=function(){var t=this.__wrapped__,d=r?[1]:arguments,l=t instanceof O,s=d[0],u=l||gc(t),i=function(e){var t=a.apply(n,c([e],d));return r&&f?t[0]:t};u&&i&&"function"==typeof s&&1!=s.length&&(l=u=!1);var f=this.__chain__,_=!!this.__actions__.length,h=o&&!f,g=l&&!_;if(!o&&u){t=g?t:new O(this);var m=e.apply(t,d);return m.__actions__.push({func:Qo,args:[p],thisArg:ne}),new y(m,f)}return h&&g?e.apply(this,d):(m=this.thru(p),h?r?m.value()[0]:m.value():m)})}),a(["pop","push","shift","sort","splice","unshift"],function(e){var t=pu[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var n=this.value();return t.apply(gc(n)?n:[],e)}return this[i](function(n){return t.apply(gc(n)?n:[],e)})}}),ni(O.prototype,function(e,t){var i=n[t];if(i){var r=i.name+"";(rp[r]||(rp[r]=[])).push({name:t,func:i})}}),rp[Yr(ne,ge).name]=[{name:"wrapper",func:ne}],O.prototype.clone=J,O.prototype.reverse=X,O.prototype.value=ee,n.prototype.at=Jp,n.prototype.chain=Xo,n.prototype.commit=ed,n.prototype.next=td,n.prototype.plant=id,n.prototype.reverse=rd,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=ad,n.prototype.first=n.prototype.head,zu&&(n.prototype[zu]=nd),n}();"function"==typeof define&&"object"==_typeof(define.amd)&&define.amd?(ri._=ki,define(function(){return ki})):oi?((oi.exports=ki)._=ki,ai._=ki):ri._=ki}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);
"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function b(c,d,e){function a(h,i){if(!d[h]){if(!c[h]){var j="function"==typeof require&&require;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var f=d[h]={exports:{}};c[h][0].call(f.exports,function(b){var d=c[h][1][b];return a(d||b)},f,f.exports,b,c,d,e)}return d[h].exports}for(var g="function"==typeof require&&require,f=0;f<e.length;f++)a(e[f]);return a}({1:[function(a,b,c){},{}],2:[function(a,b,c){var d=a("./");"undefined"==typeof window?self.raml2obj=d:window.raml2obj=d},{"./":3}],3:[function(a,b,c){var d=a("./lib/enhencer"),e=d.RamlJsonEnhancer,f=a("./lib/arrays-objects"),g=f.arraysToObjects,h=a("./lib/expander"),i=h.ExpansionLibrary;b.exports.parse=function(a){return a=a||{},a.json?new e(a).enhance(a.json):Promise.reject(new Error("Required `json` property not found."))},b.exports.prepareObject=function(a){var b={json:[]};return a?(g(a),b.json=a,Promise.resolve(b)):Promise.resolve(b)},b.exports.expandTypes=function(a){var b={types:[]};return a&&Object.keys(a).length?i.expandRootTypes(a).then(function(a){return b.types=a,b}):Promise.resolve(b)},b.exports.normalize=function(a,b){var c={json:[]};return a?(a=(new e).normalize(a,b),c.json=a,Promise.resolve(c)):Promise.resolve(c)}},{"./lib/arrays-objects":4,"./lib/enhencer":6,"./lib/expander":7}],4:[function(a,b,c){function d(a){return a&&a===Object(a)&&!Array.isArray(a)}function e(a){return Array.isArray(a)?a:Object.keys(a).map(function(b){return d(a[b])&&(a[b].key=b),a[b]})}function f(a){return a.reduce(function(a,b){return Object.keys(b).forEach(function(c){a[c]=b[c]}),a},{})}function g(a){return Array.isArray(a)?a.forEach(function(a){g(a)}):d(a)&&Object.keys(a).forEach(function(b){var c=a[b];-1!==i.indexOf(b)&&d(c)&&(a[b]=e(c)),g(c)}),a}function h(a){return j.forEach(function(b){b in a&&a[b]&&(a[b]=f(a[b]))}),a}var i=["responses","body","queryParameters","headers","properties","baseUriParameters","annotations","uriParameters"],j=["types","traits","resourceTypes","annotationTypes","securitySchemes"];b.exports={arraysToObjects:h,recursiveObjectToArray:g}},{}],5:[function(a,b,c){var d=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"isObject",value:function(a){return a&&a===Object(a)&&!Array.isArray(a)}},{key:"makeConsistent",value:function(b,c){if(!b||b.__typeConsistent)return b;if(Array.isArray(b))b.forEach(function(d,e){b[e]=a.makeConsistent(d,c)});else if(a.isObject(b)){b=a.consistentExample(b),b.type&&(b=a.consistentType(b,c)),b.items&&c&&c[b.items]&&(b.items=c[b.items]);var e=Object.keys(b);e.forEach(function(d){b[d]=a.makeConsistent(b[d],c)})}return b}},{key:"consistentType",value:function(b,c){return Array.isArray(b.type)&&(b.type=b.type[0]),b.type&&b.type.type&&(1===Object.keys(b.type).length&&(b.type=b.type.type),b.type.type&&b.type.type instanceof Array&&1===b.type.type.length&&(b.type.type=b.type.type[0])),c&&c[b.type]?a.applyType(b,c[b.type]):b.type&&b.type.type&&("type"!==b.type.name||b.type.properties||b.type.items)&&a.applyType(b,b.type),b}},{key:"consistentExample",value:function(a){return a.examples&&a.examples.length&&(a.examples=a.examples.map(function(a){return a.value?a.value:a})),a.structuredExample&&(void 0===a.examples&&(a.examples=[]),a.examples.push(a.structuredExample.value),delete a.example,delete a.structuredExample),a}},{key:"applyType",value:function(a,b){var c=this,d={description:a.description,enum:a.enum,default:a.default,schema:a.schema,xml:a.xml,name:a.name},e={properties:a.properties,items:a.items},f=[];a.examples&&(f=a.examples,delete a.examples),a.example&&(f.push(a.example),delete a.example),a=Object.assign(a,b),a.type&&Array.isArray(a.type)&&(a.type=a.type[0]),a.examples||(a.examples=[]),f.length&&(a.examples=a.examples.concat(f)),Object.keys(e).forEach(function(b){void 0!==e[b]&&(a[b]&&a[b].length||(a[b]=[]),a[b]=c.mergeExcludeDusplicates(e[b],a[b]))}),d.name===d.displayName&&a.displayName!==d.displayName&&delete d.displayName,Object.keys(d).forEach(function(b){void 0!==d[b]&&(a[b]=d[b])}),a.__typeConsistent=!0}},{key:"mergeExcludeDusplicates",value:function(a,b){a&&a.length||(a=[]),b&&b.length||(b=[]);for(var d=0,e=b.length;d<e;d++){for(var f=b[d],g=f.key,h=!1,i=0,j=a.length;i<j;i++)if(a[i].key===g){h=!0;break}h||a.push(f)}return a}}]),a}();b.exports.ConsistencyHelper=d},{}],6:[function(a,b,c){var d=a("./arrays-objects"),e=d.arraysToObjects,f=d.recursiveObjectToArray,g=a("./expander"),h=g.ExpansionLibrary,i=a("./consistency-helpers"),j=i.ConsistencyHelper,k=a("./security-schemes"),l=k.SecuritySchemesTransformer,m=!!("undefined"!=typeof performance&&performance.mark&&performance.measure&&performance.getEntriesByType),n="array-2-obj",o="expansion",p="normalization",q=function(){function a(b){_classCallCheck(this,a),b=b||{},this.takeMeasurements=b.takeMeasurements||!1}return _createClass(a,[{key:"mark",value:function(a){m&&performance.mark(a)}},{key:"_measureRersult",value:function(a,b){var c=performance.getEntriesByName(a)[0];return{duration:c.duration,name:c.name,title:b}}},{key:"getMeasurements",value:function(){if(!m)return[];performance.measure(n,n+"-start",n+"-end"),performance.measure(o,o+"-start",o+"-end"),performance.measure(p,p+"-start",p+"-end");var a=[];a.push(this._measureRersult(n,"Array to object tranformation")),a.push(this._measureRersult(o,"Datatype expansion")),a.push(this._measureRersult(p,"Data model normalization"));var b=h.getMeasurements();return a=a.concat(b),performance.clearMarks(),performance.clearMeasures(),a}},{key:"enhance",value:function(a){var b=this,c=this.takeMeasurements;return c&&this.mark(n+"-start"),e(a),c&&(this.mark(n+"-end"),this.mark(o+"-start")),h.expandRootTypes(a.types,c).then(function(d){return c&&(b.mark(o+"-end"),b.mark(p+"-start")),b.normalize(a,d)}).then(function(a){var d={json:a};return c&&(b.mark(p+"-end"),d.measurement=b.getMeasurements()),d})}},{key:"normalize",value:function(a,b){return delete a.types,this._transformTypesToArrays(b),this._transformObjectsToArrays(a),this._makeRamlConsistent(a,b),this._normalizeObject(a),b&&(a.types=b),a}},{key:"_makeRamlConsistent",value:function(a,b){b&&Object.keys(b).forEach(function(a){b[a]=j.consistentExample(b[a])}),j.makeConsistent(a,b)}},{key:"_transformObjectsToArrays",value:function(a){f(a)}},{key:"_transformTypesToArrays",value:function(a){f(a)}},{key:"_normalizeObject",value:function(a){var b={securitySchemes:a.securitySchemes},c=!this.hasProperBaseUri(a),d={computeBaseUri:c,baseUri:a.baseUri};this.enhaceJson(a,b,d)}},{key:"enhaceJson",value:function(a,b,c){var d=this;a.resources&&a.resources.forEach(function(e){e.parentUrl=c.parentUrl||"",e.allUriParameters=a.baseUriParameters?d._clone(a.baseUriParameters):[],c.computeBaseUri&&(e.absoluteUri=c.baseUri+e.relativeUri),c.allUriParameters&&(e.allUriParameters=e.allUriParameters.concat(c.allUriParameters)),e.baseUriParameters&&(e.allUriParameters=d._mergeBaseParameters(e.allUriParameters,e.baseUriParameters)),e.uriParameters&&(e.allUriParameters=e.allUriParameters.concat(e.uriParameters));var f=e.parentUrl+e.relativeUri;e.methods&&e.methods.forEach(function(a){a.allUriParameters=e.allUriParameters,a.absoluteUri=e.absoluteUri,a.relativeUri=f,a.baseUri=c.baseUri,l.addSecuritSchemes(a,b.securitySchemes)}),l.addSecuritSchemes(e,b.securitySchemes);var g=Object.assign({},c);g.parentUrl=f,g.allUriParameters=e.allUriParameters?d._clone(e.allUriParameters):[],d.enhaceJson(e,b,g)})}},{key:"hasProperBaseUri",value:function(a){if(!a||!a.resources||!a.resources[0])return!0;if(!a.baseUri)return!0;var b=a.resources[0].absoluteUri;if(!b)return!1;var c=a.baseUri;return 0===b.indexOf(c)}},{key:"_mergeBaseParameters",value:function(a,b){b=b||[],a=a?this._clone(a):[];for(var d=0,e=b.length;d<e;d++){for(var f=b[d],g=!1,h=0,i=a.length;h<i;h++)if(a[h].name===f.name){g=!0,a[h]=Object.assign(a[h],f);break}g||a.push(f)}return a}},{key:"_isArray",value:function(a){return"[object Array]"===Object.prototype.toString.apply(a)}},{key:"_clone",value:function(a){var b,c;if("object"!==(void 0===a?"undefined":_typeof(a)))return a;if(!a)return a;if(this._isArray(a)){for(b=[],c=0;c<a.length;c+=1)b[c]=this._clone(a[c]);return b}b={};for(c in a)a.hasOwnProperty(c)&&(b[c]=this._clone(a[c]));return b}}]),a}();b.exports.RamlJsonEnhancer=q},{"./arrays-objects":4,"./consistency-helpers":5,"./expander":7,"./security-schemes":8}],7:[function(a,b,c){var d=a("./consistency-helpers"),e=d.ConsistencyHelper,f=!0;("undefined"!=typeof window||"undefined"!=typeof self&&self.importScripts)&&(f=!1);var g=!!("undefined"!=typeof performance&&performance.mark&&performance.measure&&performance.getEntriesByType),h=function(){function b(){_classCallCheck(this,b)}return _createClass(b,null,[{key:"mark",value:function(a){g&&performance.mark(a)}},{key:"getMeasurements",value:function(){if(!g)return[];var a=performance.getEntriesByType("mark"),b=[];a.forEach(function(a){if(-1!==a.name.indexOf("expanding-")&&-1!==a.name.indexOf("-start")){var c=a.name.substr(10);c=c.replace("-start",""),performance.measure(c,a.name,"expanding-"+c+"-end");var d=performance.getEntriesByName(c)[0];b.push({duration:d.duration,name:d.name,title:"Expanding type: "+c})}}),performance.measure("making-expansion-consistent","making-expansion-consistent-start","making-expansion-consistent-end");var c=performance.getEntriesByName("making-expansion-consistent")[0];return b.push({duration:c.duration,name:c.name,title:"Making expansion result consistent"}),b}},{key:"expandRootTypes",value:function(a,c){if(!a)return Promise.resolve(a);var d=Object.keys(a);return d.length?b._recursiveExpand(d,a,c).then(function(a){c&&b.mark("making-expansion-consistent-start");var d=e.makeConsistent(a);return c&&b.mark("making-expansion-consistent-end"),d}):Promise.resolve(a)}},{key:"_recursiveExpand",value:function(a,c,d){var e=a.shift();return e?b._expandType(c,e,d).then(function(f){return c[e]=f[1],b._recursiveExpand(a,c,d)}):c}},{key:"_expandType",value:function(c,d,e){return new Promise(function(g){var h=f?a("datatype-expansion"):expansion;e&&b.mark("expanding-"+d+"-start"),h.expandedForm(c[d],c,function(a,f){if(a)return e&&b.mark("expanding-"+d+"-end"),g([d,c[d]]);f?h.canonicalForm(f,{hoistUnions:!1,callback:function(a,f){if(e&&b.mark("expanding-"+d+"-end"),a)return g([d,c[d]]);g(f?[d,f]:[d,c[d]])}}):g([d,c[d]])})})}}]),b}();b.exports.ExpansionLibrary=h},{"./consistency-helpers":5,"datatype-expansion":1}],8:[function(a,b,c){var d=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"isObject",value:function(a){return a&&a===Object(a)&&!Array.isArray(a)}},{key:"addSecuritSchemes",value:function(b,c){if(c&&Object.keys(c).length&&b&&b.securedBy&&b.securedBy.length){var d=!1;b.securedBy.forEach(function(e,f){if("string"==typeof e)e in c&&(d=!0,b.securedBy[f]=Object.assign({},c[e]));else if(a.isObject(e)){var g=Object.keys(e),h=g[0];if(h in c){d=!0;var i=Object.assign({},c[h]),j=e[h];i.settings=Object.assign({},i.settings,j),b.securedBy[f]=i}}}),d&&a.transform(b)}}},{key:"transform",value:function(a){a.queryParameters||(a.queryParameters=[]),a.headers||(a.headers=[]),a.securedBy||(a.securedBy=[]);var b=[];a.securedBy.forEach(function(c){c&&"string"!=typeof c&&c.describedBy&&(c.describedBy.queryParameters&&(a.queryParameters=a.queryParameters.concat(c.describedBy.queryParameters)),c.describedBy.headers&&(a.headers=a.headers.concat(c.describedBy.headers)),c.describedBy.responses&&(b=b.concat(c.describedBy.responses)))}),a.responses&&(b=b.concat(a.responses)),b.sort(function(c,a){var b=Number(c.code),d=Number(a.code);return b>d?1:b<d?-1:0}),a.responses=b}}]),a}();b.exports.SecuritySchemesTransformer=d},{}]},{},[2]);
self.Promise||(self.Promise=MakePromise(function(c){c()}));
Promise.all=Promise.all||function(){var args=Array.prototype.slice.call(1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments);return new Promise(function(resolve,reject){function res(i,val){try{if(val&&("object"==typeof val||"function"==typeof val)){var then=val.then;if("function"==typeof then)return void then.call(val,function(val){res(i,val)},reject)}args[i]=val,0==--remaining&&resolve(args)}catch(ex){reject(ex)}}if(0===args.length)return resolve([]);for(var remaining=args.length,i=0;i<args.length;i++)res(i,args[i])})},Promise.race=Promise.race||function(values){var forcedArray=values;return new Promise(function(resolve,reject){for(var i=0,len=forcedArray.length;i<len;i++)forcedArray[i].then(resolve,reject)})};
"use strict";var Nw={reportError:function(c){self.postMessage({error:!0,message:c})},reportResult:function(c){self.postMessage({error:!1,result:c})},messageHandler:function(d){var a=d.data.payload;if(!a)return Nw.reportError("Payload not set");switch(a){case"parse":Nw.parseObject(d.data);break;default:return Nw.reportError("Unknown payload")}},parseObject:function(d){var e;try{raml2obj.parse(d).then(function(b){Nw.reportResult(b)}).catch(function(b){return e=b.message||"Unknown prepare types error",Nw.reportError(e)})}catch(b){return e=b.message||"Unknown prepare types error",Nw.reportError(e)}}};self.onmessage=Nw.messageHandler;</script>
  </template>
  <script>
  (function() {
  /**
   * Making the a private propery not available in element's API.
   * Contains a list of currently running workers.
   *
   * @type {Array}
   */
  var WORKERS = [];
  /**
   * @param {String} name Name of the worker.
   * @return {Worker} A worker object for the name.
   */
  function getWorker(name) {
    for (var i = 0, len = WORKERS.length; i < len; i++) {
      if (WORKERS[i].name === name) {
        return WORKERS[i].ref;
      }
    }
  }
  Polymer({
    is: 'raml-json-enhance',
    properties: {
      /**
       * A JSON retuned by the `toJson()` function of the RAML JS parser's
       * API object.
       */
      json: {
        type: Object,
        observer: '_jsonChnaged'
      },
      // The result of enhancing the `json` object.
      result: {
        type: Object,
        notify: true,
        readOnly: true
      },
      // Flag set to true when currently JSON is being enhanced.
      expanding: {
        type: Boolean,
        notify: true,
        readOnly: true
      },
      /**
       * If true it will instruct `raml2obj` library to measure execution
       * time. It will be printed to the console after RAML is enhanced
       */
      printMeasurements: Boolean
    },
    // Handler for the `json` property change.
    _jsonChnaged: function(json) {
      if (!json) {
        return this._setResult(undefined);
      }
      this._noSupportedError();
      if (json.specification) {
        json = json.specification;
      }
      this._killWorkers();
      this.enhance(json);
    },
    /**
     * Sends an error when running from unsupported browser.
     */
    _noSupportedError: function() {
      var ie10 = /msie 10/i.test(navigator.userAgent);
      if (!ie10) {
        return;
      }
      this._setResult(undefined);
      this.fire('error', {
        message: 'This browser is not supported.'
      });
      throw new Error('This browser is not supported.');
    },
    /**
     * Terminates currently running workers.
     * Thisa is helpful when another process is requested and old process is
     * still running. It terminates workers so messages from them won't be
     * sent to the main thread and notified outside for old api call.
     *
     * It also clears data URL object created by URL.createObjectURL().
     *
     * This resets state to 0.
     */
    _killWorkers: function() {
      for (var i = WORKERS.length - 1; i >= 0; i--) {
        this.__terminateWorker(WORKERS[i]);
        WORKERS.splice(i, 1);
      }
    },
    /**
     * Terminates the worker if it exists and is running
     *
     * @param {Object} workerRef An object created by `__createWorker` function
     */
    __terminateWorker: function(workerRef) {
      workerRef.ref.terminate();
      workerRef.ref.removeEventListener('message', workerRef.data);
      workerRef.ref.removeEventListener('error', workerRef.error);
      this.__clearDataUrl(workerRef.url);
    },
    /**
     * Clears a data URL created by URL.createObjectURL().
     *
     * @param {String} url The URL to clean
     */
    __clearDataUrl: function(url) {
      if (url) {
        window.URL.revokeObjectURL(url);
      }
    },
    /**
     * Creates a web workers before the work starts.
     */
    _createWorkers: function() {
      var norm = this.__createWorker('_normalize', this.$.normalizer.textContent);
      WORKERS.push(norm);
    },
    /**
     * Creates an instance of web worker from a text content.
     *
     * @param {String} property Name of the worker. `this` must contains
     * functions for handling data and errors named `property` + `DataHandler`
     * and `property` + `ErrorHandler`
     * @param {String} body Body of the worker
     */
    __createWorker: function(property, body) {
      var blob = new Blob([body]);
      var workerUrl = window.URL.createObjectURL(blob);
      var worker = new Worker(workerUrl);
      var dataHandler = this[property + 'DataHandler'].bind(this);
      var errorHandler = this[property + 'ErrorHandler'].bind(this);
      worker.addEventListener('message', dataHandler);
      worker.addEventListener('error', errorHandler);

      return {
        name: property,
        ref: worker,
        url: workerUrl,
        error: errorHandler,
        data: dataHandler
      };
    },
    /**
     * Enhances the JavaScript object.
     *
     * @param {Object} json An object returned from RAML js parser after calling
     * `toJSON`.
     */
    enhance: function(json) {
      this._setExpanding(true);
      this._createWorkers();
      var worker = getWorker('_normalize');
      var message = {
        payload: 'parse',
        json: json,
        takeMeasurements: this.printMeasurements
      };
      worker.postMessage(message);
    },
    /**
     * Reports results to the called by dispatching the
     * `raml-json-enhance-ready` event.
     *
     * @param {Object} result Expanded and normalized object.
     */
    _reportResult: function(result) {
      this._setResult(result);
      this.fire('raml-json-enhance-ready', {
        json: result
      });
      this._killWorkers();
    },
    /**
     * Reports an error
     *
     * @param {String} errorMessage Error message to report.
     */
    _reportError: function(errorMessage) {
      var err = new Error(errorMessage);
      this.fire('error', {
        message: err.message
      });
      this._killWorkers();
      throw err;
    },
    /**
     * Handler for a message from the normalize worker.
     * Depending on current state it calls next function in the chain.
     */
    _normalizeDataHandler: function(e) {
      this._setExpanding(false);
      var data = e.data;
      if (data.error) {
        this._reportError(data.message);
        return;
      }
      var json = data.result.json;
      this._reportResult(json);
      if (data.result.measurement) {
        console.table(data.result.measurement);
      }
    },
    /**
     * Normalize worker error handler.
     */
    _normalizeErrorHandler: function(e) {
      var message = (e && e.message) ? 'Normalize worker: ' + e.message :
        'Unknown normalize worker error.';
      this._reportError(message);
    }
  });
  })();
  </script>
</dom-module>
